(()=>{"use strict";const n=function(n,e){return t=this,a=void 0,o=function*(){const t=yield fetch(e),a=yield t.arrayBuffer();return yield n.decodeAudioData(a)},new((i=void 0)||(i=Promise))((function(n,e){function r(n){try{s(o.next(n))}catch(n){e(n)}}function c(n){try{s(o.throw(n))}catch(n){e(n)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(n){n(t)}))).then(r,c)}s((o=o.apply(t,a||[])).next())}));var t,a,i,o};const e=function(e,t){return a=this,i=void 0,r=function*(){const a=yield n(e,"sfx/pop7.wav"),i=yield n(e,"sfx/pop2.wav");t.drop=a,t.pickup=i},new((o=void 0)||(o=Promise))((function(n,e){function t(n){try{s(r.next(n))}catch(n){e(n)}}function c(n){try{s(r.throw(n))}catch(n){e(n)}}function s(e){var a;e.done?n(e.value):(a=e.value,a instanceof o?a:new o((function(n){n(a)}))).then(t,c)}s((r=r.apply(a,i||[])).next())}));var a,i,o,r},t=function(n,e,t){const a=n.canvas.width,i=n.canvas.height;return{x:a/14+e*(a/7),y:i/14+t*(i/7)}},a=function(n,e,t,a,i){const o=n.canvas.width/7,r=n.canvas.height/7;let c,s;"h"===e.orientation?(s=r,c=o*e.size):(s=r*e.size,c=o),i&&(c+=10,s+=10,a.x-=5,a.y-=5),n.fillStyle=t,n.fillRect(a.x,a.y,c,s)},i=["#FFEF9E","#D2FF9E","#9EFFA8","#9EFFE5","#9EDBFF","#9E9EFF","#DB9EFF","#FF9EE5","#FF9EA8","#FFD09E"],o="#ff0000",r=function(n,e){(function(n){n.fillStyle="#000000",n.fillRect(0,0,n.canvas.width,n.canvas.height)})(n),function(n){const e=n.canvas.width,t=n.canvas.height;n.fillStyle="#303030",n.fillRect(e/14,t/14,6*e/7,6*t/7),n.fillStyle="#606060";for(let a=0;a<6;++a)for(let i=0;i<6;++i){const o=e/14+3*e/56+a*e/7,r=t/14+3*t/56+i*t/7;n.fillRect(o,r,e/28,t/28)}const a=13*t/14,i=5*t/14;n.fillStyle="#303030",n.fillRect(a,i,e/14,t/7)}(n),"title"!==e.gamePhase&&function(n,e){if(e.cars.forEach(((r,c)=>{const s=0===c?o:i[c];if(c!==e.heldCarIndex){const e=t(n,r.x,r.y);if("incoming"===r.animation){if(r.animationFrame<0)return;const t=Math.max(0,(30-r.animationFrame)/30);e.y-=1/60*Math.pow(n.canvas.height*t,2)}else if("falling"===r.animation){if(r.animationFrame>30)return;const t=Math.max(0,Math.min(1,r.animationFrame/30));e.y+=1/60*Math.pow(n.canvas.height*t,2)}a(n,r,s,e,!1)}})),e.heldCarIndex>=0){const t=e.cars[e.heldCarIndex],r=0===e.heldCarIndex?o:i[e.heldCarIndex],c=Object.assign({},e.heldCarPosition);"falling"===t.animation&&(c.x+=5*t.animationFrame),a(n,t,r,c,!0)}}(n,e),function(n){const e=n.canvas.width,t=n.canvas.height,a=e/14,i=t/14,o=t/7,r=5*t/14,c=7*t/14;n.fillStyle="#606060",n.fillRect(0,0,a,t),n.fillRect(a,0,e-2*a,i),n.fillRect(a,t-i,e-2*a,i),n.fillRect(e-a,0,a,r),n.fillRect(e-a,r+o,a,c)}(n),function(n,e){if(e.heldCarIndex>=0){const t=e.cars[e.heldCarIndex],r=0===e.heldCarIndex?o:i[e.heldCarIndex],c=Object.assign({},e.heldCarPosition);"falling"===t.animation&&(c.x+=5*t.animationFrame),a(n,t,r,c,!0)}}(n,e),"title"===e.gamePhase&&function(n){const e=n.canvas.width,t=n.canvas.height;n.textAlign="center",n.textBaseline="middle",n.font='48px "Dosis", sans-serif',n.fillStyle="#ffffff",n.fillText("Click or Tap to Start",e/2,t/2)}(n)};const c=function(n){return e=this,t=void 0,i=function*(){const e=yield fetch(n);return(yield e.json()).cars},new((a=void 0)||(a=Promise))((function(n,o){function r(n){try{s(i.next(n))}catch(n){o(n)}}function c(n){try{s(i.throw(n))}catch(n){o(n)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(n){n(t)}))).then(r,c)}s((i=i.apply(e,t||[])).next())}));var e,t,a,i};const s=function(n){return e=this,t=void 0,i=function*(){let e;switch(n.currentLevel){case 0:e="levels/level01.json";break;case 1:e="levels/level11.json";break;case 2:e="levels/level21.json";break;default:e="levels/level31.json"}n.cars=yield c(e),n.holdingCar=!1,n.heldCarIndex=-1,n.levelComplete=!1,"title"!==n.gamePhase&&(n.gamePhase="settingUpLevel"),n.cars.forEach(((n,e)=>{n.animationFrame=-10*e,n.animation="incoming"}))},new((a=void 0)||(a=Promise))((function(n,o){function r(n){try{s(i.next(n))}catch(n){o(n)}}function c(n){try{s(i.throw(n))}catch(n){o(n)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(n){n(t)}))).then(r,c)}s((i=i.apply(e,t||[])).next())}));var e,t,a,i},l=function(n){return!n.cars.some((n=>n.animationFrame<30))},u=function(n,e,a){const{x:i,y:o}=a,r=n.canvas.width/7,c=n.canvas.height/7,{x:s,y:l}=t(n,e.x,e.y);let u,d;return"h"===e.orientation?(u=e.size*r,d=c):(u=r,d=e.size*c),i>=s&&i<=s+u&&o>=l&&o<=l+d},d=function(n,e,t){for(const a of t)if("h"==a.orientation){if(a.y===e&&n>=a.x&&n<a.x+a.size)return!0}else if(a.x===n&&e>=a.y&&e<a.y+a.size)return!0;return!1},f=function(n,e,a){const i=function(n,e,a){const i=e.cars[e.heldCarIndex],o=t(n,i.x,i.y),r=a.canvasMouse.x-e.holdOriginalCanvasMouse.x,c=a.canvasMouse.y-e.holdOriginalCanvasMouse.y;return{x:o.x+r,y:o.y+c}}(n,e,a);return{x:Math.max(e.dragBoundaries.minX,Math.min(e.dragBoundaries.maxX,i.x)),y:Math.max(e.dragBoundaries.minY,Math.min(e.dragBoundaries.maxY,i.y))}},h=function(n,e,a){if(!e.holdingCar&&a.mouseButtonPressed)e.holdingCar=!0,e.heldCarIndex=function(n,e,t){for(let a=0;a<e.cars.length;++a)if(u(n,e.cars[a],t.canvasMouse))return a;return-1}(n,e,a),e.holdOriginalCanvasMouse=Object.assign({},a.canvasMouse),e.heldCarIndex>=0&&(e.dragBoundaries=function(n,e){const a=e.cars[e.heldCarIndex],i=e.cars;if("h"===a.orientation){let e=a.x;for(;e>0&&!d(e-1,a.y,i);)e-=1;let o=a.x;for(;o+a.size<6&&!d(o+a.size,a.y,i);)o+=1;2===a.y&&o===6-a.size&&(o=6);const r=t(n,e,a.y),c=t(n,o,a.y);return{maxX:c.x,maxY:c.y,minX:r.x,minY:r.y}}{let e=a.y;for(;e>0&&!d(a.x,e-1,i);)e-=1;let o=a.y;for(;o+a.size<6&&!d(a.x,o+a.size,i);)o+=1;const r=t(n,a.x,e),c=t(n,a.x,o);return{maxX:c.x,maxY:c.y,minX:r.x,minY:r.y}}}(n,e),e.playPickupSound=!0);else if(e.holdingCar&&!a.mouseButtonPressed){if(e.heldCarIndex>=0){const t=function(n,e){const t=n.canvas.width,a=n.canvas.height,i=6*t/7,o=6*a/7,r=t/14,c=a/14,s=(e.x-r)/i*6,l=(e.y-c)/o*6,u=Math.round(s),d=Math.round(l);return console.log(`${u},${d}`),{x:u,y:d}}(n,f(n,e,a));e.cars[e.heldCarIndex].x=t.x,e.cars[e.heldCarIndex].y=t.y,e.playDropSound=!0}e.holdingCar=!1,e.heldCarIndex=-1}},m=function(n){n.cars.forEach((e=>{++e.animationFrame,"incoming"===e.animation&&30===e.animationFrame?n.playDropSound=!0:"falling"===e.animation&&1===e.animationFrame&&(n.playPickupSound=!0)}))},v=function(n,e,t){"settingUpLevel"===e.gamePhase?(m(e),l(e)&&function(n){n.gamePhase="play",n.cars.forEach((n=>{n.animation="none",n.animationFrame=0}))}(e)):"play"===e.gamePhase?(h(n,e,t),function(n,e,t){e.holdingCar&&e.heldCarIndex>=0&&(e.heldCarPosition=f(n,e,t))}(n,e,t),function(n,e){if(0===e.heldCarIndex&&function(n,e,t){const a=n.canvas.width,i=a/7;return t.x+i*e.size>a}(n,e.cars[e.heldCarIndex],e.heldCarPosition))3===e.currentLevel&&alert("You're purdy smart there einstein"),e.gamePhase="tearingDownLevel",e.cars.forEach(((n,e)=>{n.animation="falling",n.animationFrame=-10*e}))}(n,e)):"tearingDownLevel"===e.gamePhase&&(m(e),l(e)&&(e.levelComplete=!0,e.currentLevel=e.currentLevel+1))},x=function(n,e){const t=n.createBufferSource();t.buffer=e,t.connect(n.destination),t.start()};const y=document.getElementById("gridlockCanvas"),g=y.getContext("2d"),p=new AudioContext,C={drop:void 0,pickup:void 0};let w=0,F=0;const P={cars:[],currentLevel:0,dragBoundaries:{maxX:0,maxY:0,minX:0,minY:0},gamePhase:"title",heldCarIndex:-1,heldCarPosition:{x:0,y:0},holdingCar:!1,holdOriginalCanvasMouse:{x:0,y:0},levelComplete:!1,playDropSound:!1,playPickupSound:!1},E={canvasMouse:{x:0,y:0},mouseButtonPressed:!1};function I(){E.canvasMouse=function(){const n=y.getBoundingClientRect();return{x:Math.floor(w-n.x),y:Math.floor(F-n.y)}}(),v(g,P,E),P.levelComplete?s(P).then((()=>{window.requestAnimationFrame(I)})):(r(g,P),function(n,e,t){e.playDropSound&&t.drop&&x(n,t.drop),e.playPickupSound&&t.pickup&&x(n,t.pickup),e.playDropSound=!1,e.playPickupSound=!1}(p,P,C),window.requestAnimationFrame(I))}function M(n){E.mouseButtonPressed=!(1&~n.buttons),w=n.clientX,F=n.clientY}function B(n){E.mouseButtonPressed=!1}document.addEventListener("mousedown",M),document.addEventListener("mousemove",M),document.addEventListener("mouseup",M),y.addEventListener("touchstart",(function(n){E.mouseButtonPressed=!0,w=n.changedTouches[0].clientX,F=n.changedTouches[0].clientY})),y.addEventListener("touchmove",(function(n){n.preventDefault(),w=n.changedTouches[0].clientX,F=n.changedTouches[0].clientY})),y.addEventListener("touchend",B),y.addEventListener("touchcancel",B),y.addEventListener("click",(function(n){n.preventDefault(),"title"===P.gamePhase&&(P.gamePhase="settingUpLevel")})),function(){return n=this,t=void 0,i=function*(){yield e(p,C),yield s(P)},new((a=void 0)||(a=Promise))((function(e,o){function r(n){try{s(i.next(n))}catch(n){o(n)}}function c(n){try{s(i.throw(n))}catch(n){o(n)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof a?t:new a((function(n){n(t)}))).then(r,c)}s((i=i.apply(n,t||[])).next())}));var n,t,a,i}().then((()=>{window.requestAnimationFrame(I)})).catch((n=>{console.error("initialization error"),console.error(n)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFTQSxRQVRBLFNBQXVDQSxFQUE0QkMsRyxxQ0FDL0QsTUFBTUMsUUFBYUMsTUFBTUYsR0FDbkJHLFFBQW9CRixFQUFLRSxjQUkvQixhQUYwQkosRUFBYUssZ0JBQWdCRCxFQUczRCxFLGdTQ0tBLFFBUkEsU0FBeUJKLEVBQTRCTSxHLHFDQUNqRCxNQUFNQyxRQUF3QixFQUF3QlAsRUFBYyxnQkFDOURRLFFBQTBCLEVBQXdCUixFQUFjLGdCQUV0RU0sRUFBYUcsS0FBT0YsRUFDcEJELEVBQWFJLE9BQVNGLENBQzFCLEUsZ1NDYUEsRUFyQkEsU0FBMkJHLEVBQStCQyxFQUFnQkMsR0FDdEUsTUFBTUMsRUFBUUgsRUFBSUksT0FBT0QsTUFDbkJFLEVBQVNMLEVBQUlJLE9BQU9DLE9BZ0IxQixNQUw0QixDQUN4QkMsRUFWaUJILEVBQVEsR0FNQ0YsR0FIVkUsRUFBUSxHQVF4QkksRUFWa0JGLEVBQVMsR0FNQUgsR0FIVkcsRUFBUyxHQVdsQyxFQ1VBLEVBNUJBLFNBQWlCTCxFQUErQlEsRUFBVUMsRUFBZUMsRUFBdUJDLEdBQzVGLE1BR01DLEVBSFFaLEVBQUlJLE9BQU9ELE1BR0UsRUFDckJVLEVBSFNiLEVBQUlJLE9BQU9DLE9BR0csRUFFN0IsSUFBSVMsRUFBa0JDLEVBRUUsTUFBcEJQLEVBQUlRLGFBQ0pELEVBQVlGLEVBQ1pDLEVBQVdGLEVBQWFKLEVBQUlTLE9BRTVCRixFQUFZRixFQUFjTCxFQUFJUyxLQUM5QkgsRUFBV0YsR0FHWEQsSUFDQUcsR0FBWSxHQUNaQyxHQUFhLEdBQ2JMLEVBQVNKLEdBQUssRUFDZEksRUFBU0gsR0FBSyxHQUdsQlAsRUFBSWtCLFVBQVlULEVBQ2hCVCxFQUFJbUIsU0FBU1QsRUFBU0osRUFBR0ksRUFBU0gsRUFBR08sRUFBVUMsRUFDbkQsRUNoQkEsRUFia0IsQ0FDZCxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxXQ1JKLEVBRndCLFVDc0J4QixFQWJBLFNBQWNmLEVBQStCb0IsSUNUN0MsU0FBcUJwQixHQUNqQkEsRUFBSWtCLFVBQVksVUFDaEJsQixFQUFJbUIsU0FBUyxFQUFHLEVBQUduQixFQUFJSSxPQUFPRCxNQUFPSCxFQUFJSSxPQUFPQyxPQUNwRCxFRE9JLENBQVlMLEdFVmhCLFNBQWtCQSxHQUNkLE1BQU1HLEVBQVFILEVBQUlJLE9BQU9ELE1BQ25CRSxFQUFTTCxFQUFJSSxPQUFPQyxPQUMxQkwsRUFBSWtCLFVBQVksVUFDaEJsQixFQUFJbUIsU0FBU2hCLEVBQVEsR0FBSUUsRUFBUyxHQUFJLEVBQUlGLEVBQVEsRUFBRyxFQUFJRSxFQUFTLEdBRWxFTCxFQUFJa0IsVUFBWSxVQUNoQixJQUFLLElBQUlHLEVBQUksRUFBR0EsRUFBSSxJQUFLQSxFQUNyQixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxJQUFLQSxFQUFHLENBQ3hCLE1BQU1oQixFQUFLSCxFQUFRLEdBQU8sRUFBSUEsRUFBUSxHQUFPa0IsRUFBSWxCLEVBQVEsRUFDbkRJLEVBQUtGLEVBQVMsR0FBTyxFQUFJQSxFQUFTLEdBQU9pQixFQUFJakIsRUFBUyxFQUM1REwsRUFBSW1CLFNBQVNiLEVBQUdDLEVBQUdKLEVBQVEsR0FBSUUsRUFBUyxHQUM1QyxDQUdKLE1BQU1rQixFQUFRLEdBQUtsQixFQUFTLEdBQ3RCbUIsRUFBUSxFQUFJbkIsRUFBUyxHQUMzQkwsRUFBSWtCLFVBQVksVUFDaEJsQixFQUFJbUIsU0FBU0ksRUFBT0MsRUFBT3JCLEVBQVEsR0FBSUUsRUFBUyxFQUNwRCxDRlJJLENBQVNMLEdBQ2MsVUFBbkJvQixFQUFLSyxXR0ZiLFNBQWtCekIsRUFBK0JvQixHQXFCN0MsR0FwQkFBLEVBQUtNLEtBQUtDLFNBQVEsQ0FBQ25CLEVBQUthLEtBQ3BCLE1BQU1aLEVBQWMsSUFBTlksRUFBVSxFQUFrQixFQUFVQSxHQUNwRCxHQUFJQSxJQUFNRCxFQUFLUSxhQUdWLENBQ0QsTUFBTUMsRUFBYyxFQUFrQjdCLEVBQUtRLEVBQUlGLEVBQUdFLEVBQUlELEdBQ3RELEdBQXNCLGFBQWxCQyxFQUFJc0IsVUFBMEIsQ0FDOUIsR0FBSXRCLEVBQUl1QixlQUFpQixFQUFHLE9BQzVCLE1BQU1DLEVBQVFDLEtBQUtDLElBQUksR0FBSSxHQUFLMUIsRUFBSXVCLGdCQUFrQixJQUN0REYsRUFBWXRCLEdBQU0sRUFBRSxHQUFNMEIsS0FBS0UsSUFBS25DLEVBQUlJLE9BQU9DLE9BQVMyQixFQUFRLEVBQ3BFLE1BQ0ssR0FBc0IsWUFBbEJ4QixFQUFJc0IsVUFBeUIsQ0FDbEMsR0FBSXRCLEVBQUl1QixlQUFpQixHQUFJLE9BQzdCLE1BQU1DLEVBQVFDLEtBQUtDLElBQUksRUFBR0QsS0FBS0csSUFBSSxFQUFHNUIsRUFBSXVCLGVBQWlCLEtBQzNERixFQUFZdEIsR0FBTSxFQUFFLEdBQU0wQixLQUFLRSxJQUFLbkMsRUFBSUksT0FBT0MsT0FBUzJCLEVBQVEsRUFDcEUsQ0FDQSxFQUFRaEMsRUFBS1EsRUFBS0MsRUFBT29CLEdBQWEsRUFDMUMsS0FFQVQsRUFBS1EsY0FBZ0IsRUFBRyxDQUN4QixNQUFNUyxFQUFVakIsRUFBS00sS0FBS04sRUFBS1EsY0FDekJuQixFQUE4QixJQUF0QlcsRUFBS1EsYUFBcUIsRUFBa0IsRUFBVVIsRUFBS1EsY0FDbkVDLEVBQWMsT0FBSCxVQUFRVCxFQUFLa0IsaUJBQ0EsWUFBdEJELEVBQVFQLFlBQ1JELEVBQVl2QixHQUE4QixFQUF6QitCLEVBQVFOLGdCQUU3QixFQUFRL0IsRUFBS3FDLEVBQVM1QixFQUFPb0IsR0FBYSxFQUNsRCxDQUNKLENIM0JRLENBQVM3QixFQUFLb0IsR0lidEIsU0FBb0JwQixHQUNoQixNQUFNRyxFQUFRSCxFQUFJSSxPQUFPRCxNQUNuQkUsRUFBU0wsRUFBSUksT0FBT0MsT0FDcEJrQyxFQUFjcEMsRUFBUSxHQUN0QnFDLEVBQWVuQyxFQUFTLEdBQ3hCUSxFQUFjUixFQUFTLEVBRXZCb0MsRUFBMkIsRUFBSXBDLEVBQVMsR0FDeENxQyxFQUE4QixFQUFJckMsRUFBUyxHQUNqREwsRUFBSWtCLFVBQVksVUFDaEJsQixFQUFJbUIsU0FBUyxFQUFHLEVBQUdvQixFQUFhbEMsR0FDaENMLEVBQUltQixTQUFTb0IsRUFBYSxFQUFJcEMsRUFBUyxFQUFJb0MsRUFBZUMsR0FDMUR4QyxFQUFJbUIsU0FBU29CLEVBQWFsQyxFQUFTbUMsRUFBZXJDLEVBQVMsRUFBSW9DLEVBQWVDLEdBQzlFeEMsRUFBSW1CLFNBQVNoQixFQUFRb0MsRUFBYSxFQUFHQSxFQUFhRSxHQUNsRHpDLEVBQUltQixTQUFTaEIsRUFBUW9DLEVBQWFFLEVBQTJCNUIsRUFBYTBCLEVBQWFHLEVBQzNGLENKQUksQ0FBVzFDLEdLVGYsU0FBcUJBLEVBQStCb0IsR0FDaEQsR0FBSUEsRUFBS1EsY0FBZ0IsRUFBRyxDQUN4QixNQUFNUyxFQUFVakIsRUFBS00sS0FBS04sRUFBS1EsY0FDekJuQixFQUE4QixJQUF0QlcsRUFBS1EsYUFBcUIsRUFBa0IsRUFBVVIsRUFBS1EsY0FDbkVDLEVBQWMsT0FBSCxVQUFRVCxFQUFLa0IsaUJBQ0EsWUFBdEJELEVBQVFQLFlBQ1JELEVBQVl2QixHQUE4QixFQUF6QitCLEVBQVFOLGdCQUU3QixFQUFRL0IsRUFBS3FDLEVBQVM1QixFQUFPb0IsR0FBYSxFQUNsRCxDQUNKLENMQUksQ0FBWTdCLEVBQUtvQixHQUNNLFVBQW5CQSxFQUFLSyxXTWpCYixTQUE2QnpCLEdBQ3pCLE1BQU1HLEVBQVFILEVBQUlJLE9BQU9ELE1BQ25CRSxFQUFTTCxFQUFJSSxPQUFPQyxPQUUxQkwsRUFBSTJDLFVBQVksU0FDaEIzQyxFQUFJNEMsYUFBZSxTQUNuQjVDLEVBQUk2QyxLQUFPLDJCQUNYN0MsRUFBSWtCLFVBQVksVUFDaEJsQixFQUFJOEMsU0FBUyx3QkFBeUIzQyxFQUFNLEVBQUdFLEVBQU8sRUFHMUQsQ05PUSxDQUFvQkwsRUFFNUIsRU9YQSxRQVBBLFNBQWlDVixHLHFDQUM3QixNQUFNeUQsUUFBc0J2RCxNQUFNRixHQUdsQyxhQUZ3QnlELEVBQWNDLFFBQ2Z0QixJQUUzQixFLGdTQzZCQSxRQWhDQSxTQUF5QnVCLEcscUNBQ3JCLElBQUlDLEVBQ0osT0FBT0QsRUFBVUUsY0FDYixLQUFLLEVBQ0RELEVBQVksc0JBQ1osTUFDSixLQUFLLEVBQ0RBLEVBQVksc0JBQ1osTUFDSixLQUFLLEVBQ0RBLEVBQVksc0JBQ1osTUFJSixRQUNJQSxFQUFZLHNCQUVwQkQsRUFBVXZCLFdBQWEsRUFBa0J3QixHQUN6Q0QsRUFBVUcsWUFBYSxFQUN2QkgsRUFBVXJCLGNBQWdCLEVBQzFCcUIsRUFBVUksZUFBZ0IsRUFDRSxVQUF4QkosRUFBVXhCLFlBQ1Z3QixFQUFVeEIsVUFBWSxrQkFHMUJ3QixFQUFVdkIsS0FBS0MsU0FBUSxDQUFDbkIsRUFBS2EsS0FDekJiLEVBQUl1QixnQkFBc0IsR0FBTFYsRUFDckJiLEVBQUlzQixVQUFZLFVBQVUsR0FFbEMsRSxnU0M1QkEsRUFKQSxTQUFrQ1YsR0FDOUIsT0FBU0EsRUFBS00sS0FBSzRCLE1BQUs5QyxHQUFPQSxFQUFJdUIsZUFBaUIsSUFDeEQsRUM0QkEsRUEzQkEsU0FBNkIvQixFQUErQlEsRUFBVStDLEdBQ2xFLE1BQVFqRCxFQUFHa0QsRUFBY2pELEVBQUdrRCxHQUFpQkYsRUFJdkMzQyxFQUZRWixFQUFJSSxPQUFPRCxNQUVFLEVBQ3JCVSxFQUZTYixFQUFJSSxPQUFPQyxPQUVHLEdBRXRCQyxFQUFHb0QsRUFBTW5ELEVBQUdvRCxHQUFRLEVBQWtCM0QsRUFBS1EsRUFBSUYsRUFBR0UsRUFBSUQsR0FDN0QsSUFBSU8sRUFBa0JDLEVBZXRCLE1BZHdCLE1BQXBCUCxFQUFJUSxhQUNKRixFQUFXTixFQUFJUyxLQUFPTCxFQUN0QkcsRUFBWUYsSUFFWkMsRUFBV0YsRUFDWEcsRUFBWVAsRUFBSVMsS0FBT0osR0FJdkIyQyxHQUFnQkUsR0FDaEJGLEdBQWdCRSxFQUFPNUMsR0FDdkIyQyxHQUFnQkUsR0FDaEJGLEdBQWdCRSxFQUFPNUMsQ0FHL0IsRUNUQSxFQW5CQSxTQUF5QmQsRUFBZ0JDLEVBQWdCd0IsR0FDckQsSUFBSyxNQUFNbEIsS0FBT2tCLEVBQ2QsR0FBdUIsS0FBbkJsQixFQUFJUSxhQUNKLEdBQUlSLEVBQUlELElBQU1MLEdBQ1ZELEdBQVVPLEVBQUlGLEdBQ2RMLEVBQVNPLEVBQUlGLEVBQUlFLEVBQUlTLEtBQ2pCLE9BQU8sT0FHZixHQUFJVCxFQUFJRixJQUFNTCxHQUNWQyxHQUFVTSxFQUFJRCxHQUNkTCxFQUFTTSxFQUFJRCxFQUFJQyxFQUFJUyxLQUNqQixPQUFPLEVBSXZCLE9BQU8sQ0FDWCxFQ0pBLEVBVkEsU0FBNEJqQixFQUErQm9CLEVBQWlCd0MsR0FFeEUsTUFBTUMsRUNEVixTQUFrQzdELEVBQStCb0IsRUFBaUJ3QyxHQUM5RSxNQUFNdkIsRUFBVWpCLEVBQUtNLEtBQUtOLEVBQUtRLGNBQ3pCa0MsRUFBZ0IsRUFBa0I5RCxFQUFLcUMsRUFBUS9CLEVBQUcrQixFQUFROUIsR0FDMUR3RCxFQUFRSCxFQUFNSSxZQUFZMUQsRUFBSWMsRUFBSzZDLHdCQUF3QjNELEVBQzNENEQsRUFBUU4sRUFBTUksWUFBWXpELEVBQUlhLEVBQUs2Qyx3QkFBd0IxRCxFQUdqRSxNQUFPLENBQUVELEVBRnNCd0QsRUFBY3hELEVBQUl5RCxFQUVieEQsRUFETHVELEVBQWN2RCxFQUFJMkQsRUFFckQsQ0RQa0MsQ0FBeUJsRSxFQUFLb0IsRUFBTXdDLEdBTWxFLE1BTHdCLENBQ3BCdEQsRUFBRzJCLEtBQUtDLElBQUlkLEVBQUsrQyxlQUFlQyxLQUFNbkMsS0FBS0csSUFBSWhCLEVBQUsrQyxlQUFlRSxLQUFNUixFQUFzQnZELElBQy9GQyxFQUFHMEIsS0FBS0MsSUFBSWQsRUFBSytDLGVBQWVHLEtBQU1yQyxLQUFLRyxJQUFJaEIsRUFBSytDLGVBQWVJLEtBQU1WLEVBQXNCdEQsSUFJdkcsRUVpQkEsRUF2QkEsU0FBeUJQLEVBQStCb0IsRUFBaUJ3QyxHQUNyRSxJQUFLeEMsRUFBS2dDLFlBQWNRLEVBQU1ZLG1CQUMxQnBELEVBQUtnQyxZQUFhLEVBQ2xCaEMsRUFBS1EsYUNOYixTQUFrQzVCLEVBQStCb0IsRUFBaUJ3QyxHQUM5RSxJQUFLLElBQUl2QyxFQUFJLEVBQUdBLEVBQUlELEVBQUtNLEtBQUsrQyxTQUFVcEQsRUFDcEMsR0FBSSxFQUFvQnJCLEVBQUtvQixFQUFLTSxLQUFLTCxHQUFJdUMsRUFBTUksYUFDN0MsT0FBTzNDLEVBR2YsT0FBUSxDQUNaLENERDRCLENBQXlCckIsRUFBS29CLEVBQU13QyxHQUN4RHhDLEVBQUs2Qyx3QkFBMEIsT0FBSCxVQUFRTCxFQUFNSSxhQUN0QzVDLEVBQUtRLGNBQWdCLElBQ3JCUixFQUFLK0MsZUVSakIsU0FBMkJuRSxFQUErQm9CLEdBQ3RELE1BQU1pQixFQUFVakIsRUFBS00sS0FBS04sRUFBS1EsY0FDekJGLEVBQU9OLEVBQUtNLEtBQ2xCLEdBQTRCLE1BQXhCVyxFQUFRckIsWUFBcUIsQ0FDN0IsSUFBSTBELEVBQVlyQyxFQUFRL0IsRUFDeEIsS0FBT29FLEVBQVksSUFBTSxFQUFnQkEsRUFBWSxFQUFHckMsRUFBUTlCLEVBQUdtQixJQUMvRGdELEdBQWEsRUFHakIsSUFBSUMsRUFBWXRDLEVBQVEvQixFQUN4QixLQUFPcUUsRUFBWXRDLEVBQVFwQixLQUFPLElBQU0sRUFBZ0IwRCxFQUFZdEMsRUFBUXBCLEtBQU1vQixFQUFROUIsRUFBR21CLElBQ3pGaUQsR0FBYSxFQUdDLElBQWR0QyxFQUFROUIsR0FBV29FLElBQWMsRUFBSXRDLEVBQVFwQixPQUU3QzBELEVBQVksR0FHaEIsTUFBTUMsRUFBWSxFQUFrQjVFLEVBQUswRSxFQUFXckMsRUFBUTlCLEdBQ3REc0UsRUFBWSxFQUFrQjdFLEVBQUsyRSxFQUFXdEMsRUFBUTlCLEdBUzVELE1BUHdDLENBQ3BDOEQsS0FBTVEsRUFBVXZFLEVBQ2hCaUUsS0FBTU0sRUFBVXRFLEVBQ2hCNkQsS0FBTVEsRUFBVXRFLEVBQ2hCZ0UsS0FBTU0sRUFBVXJFLEVBSXhCLENBQU8sQ0FDSCxJQUFJdUUsRUFBWXpDLEVBQVE5QixFQUN4QixLQUFPdUUsRUFBWSxJQUFNLEVBQWdCekMsRUFBUS9CLEVBQUd3RSxFQUFZLEVBQUdwRCxJQUMvRG9ELEdBQWEsRUFHakIsSUFBSUMsRUFBWTFDLEVBQVE5QixFQUN4QixLQUFPd0UsRUFBWTFDLEVBQVFwQixLQUFPLElBQU0sRUFBZ0JvQixFQUFRL0IsRUFBR3lFLEVBQVkxQyxFQUFRcEIsS0FBTVMsSUFDekZxRCxHQUFhLEVBR2pCLE1BQU1ILEVBQVksRUFBa0I1RSxFQUFLcUMsRUFBUS9CLEVBQUd3RSxHQUM5Q0QsRUFBWSxFQUFrQjdFLEVBQUtxQyxFQUFRL0IsRUFBR3lFLEdBU3BELE1BUHdDLENBQ3BDVixLQUFNUSxFQUFVdkUsRUFDaEJpRSxLQUFNTSxFQUFVdEUsRUFDaEI2RCxLQUFNUSxFQUFVdEUsRUFDaEJnRSxLQUFNTSxFQUFVckUsRUFJeEIsQ0FDSixDRjdDa0MsQ0FBa0JQLEVBQUtvQixHQUM3Q0EsRUFBSzRELGlCQUFrQixRQUcxQixHQUFJNUQsRUFBS2dDLGFBQWVRLEVBQU1ZLG1CQUFvQixDQUNuRCxHQUFJcEQsRUFBS1EsY0FBZ0IsRUFBRyxDQUN4QixNQUNNcUQsRUduQmxCLFNBQXVDakYsRUFBK0JrRixHQUNsRSxNQUFNL0UsRUFBUUgsRUFBSUksT0FBT0QsTUFDbkJFLEVBQVNMLEVBQUlJLE9BQU9DLE9BQ3BCOEUsRUFBaUIsRUFBSWhGLEVBQVEsRUFDN0JpRixFQUFrQixFQUFJL0UsRUFBUyxFQUMvQmdGLEVBQWFsRixFQUFRLEdBQ3JCbUYsRUFBYWpGLEVBQVMsR0FLdEJKLEdBSGNpRixFQUFZNUUsRUFBSStFLEdBR05GLEVBQWtCLEVBQzFDakYsR0FIY2dGLEVBQVkzRSxFQUFJK0UsR0FHTkYsRUFBbUIsRUFDM0NHLEVBQWdCdEQsS0FBS3VELE1BQU12RixHQUMzQndGLEVBQWdCeEQsS0FBS3VELE1BQU10RixHQUdqQyxPQUZBd0YsUUFBUUMsSUFBSSxHQUFHSixLQUFpQkUsS0FFekIsQ0FBRW5GLEVBQUdpRixFQUFlaEYsRUFBR2tGLEVBQ2xDLENIQ21DLENBQThCekYsRUFEN0IsRUFBbUJBLEVBQUtvQixFQUFNd0MsSUFFdER4QyxFQUFLTSxLQUFLTixFQUFLUSxjQUFjdEIsRUFBSTJFLEVBQWUzRSxFQUNoRGMsRUFBS00sS0FBS04sRUFBS1EsY0FBY3JCLEVBQUkwRSxFQUFlMUUsRUFDaERhLEVBQUt3RSxlQUFnQixDQUN6QixDQUNBeEUsRUFBS2dDLFlBQWEsRUFDbEJoQyxFQUFLUSxjQUFnQixDQUN6QixDQUNKLEVJZkEsRUFaQSxTQUFxQlIsR0FDakJBLEVBQUtNLEtBQUtDLFNBQVFuQixNQUNaQSxFQUFJdUIsZUFDZ0IsYUFBbEJ2QixFQUFJc0IsV0FBbUQsS0FBdkJ0QixFQUFJdUIsZUFDcENYLEVBQUt3RSxlQUFnQixFQUVFLFlBQWxCcEYsRUFBSXNCLFdBQWtELElBQXZCdEIsRUFBSXVCLGlCQUN4Q1gsRUFBSzRELGlCQUFrQixFQUMzQixHQUVSLEVDa0JBLEVBbkJBLFNBQWdCaEYsRUFBK0JvQixFQUFpQndDLEdBQ3JDLG1CQUFuQnhDLEVBQUtLLFdBQ0wsRUFBWUwsR0FDUixFQUF5QkEsSUNackMsU0FBMkJBLEdBQ3ZCQSxFQUFLSyxVQUFZLE9BQ2pCTCxFQUFLTSxLQUFLQyxTQUFRbkIsSUFDZEEsRUFBSXNCLFVBQVksT0FDaEJ0QixFQUFJdUIsZUFBaUIsQ0FBQyxHQUU5QixDRE9ZLENBQWtCWCxJQUVJLFNBQW5CQSxFQUFLSyxXQUNaLEVBQWdCekIsRUFBS29CLEVBQU13QyxHRWJuQyxTQUErQjVELEVBQStCb0IsRUFBaUJ3QyxHQUN2RXhDLEVBQUtnQyxZQUFjaEMsRUFBS1EsY0FBZ0IsSUFDeENSLEVBQUtrQixnQkFBa0IsRUFBbUJ0QyxFQUFLb0IsRUFBTXdDLEdBRTdELENGVVEsQ0FBc0I1RCxFQUFLb0IsRUFBTXdDLEdHZnpDLFNBQXlDNUQsRUFBK0JvQixHQUNwRSxHQUEwQixJQUF0QkEsRUFBS1EsY0NGYixTQUEwQjVCLEVBQStCcUMsRUFBY0MsR0FDbkUsTUFBTW5DLEVBQVFILEVBQUlJLE9BQU9ELE1BQ25CUyxFQUFjVCxFQUFRLEVBSTVCLE9BSGtCbUMsRUFBZ0JoQyxFQUFLTSxFQUFheUIsRUFBUXBCLEtBRXpCZCxDQUV2QyxDRExtQyxDQUFpQkgsRUFBS29CLEVBQUtNLEtBQUtOLEVBQUtRLGNBQWVSLEVBQUtrQixpQkFDMUQsSUFBdEJsQixFQUFLK0IsY0FDTDBDLE1BQU0scUNBRVZ6RSxFQUFLSyxVQUFZLG1CQUNqQkwsRUFBS00sS0FBS0MsU0FBUSxDQUFDbkIsRUFBS2EsS0FDcEJiLEVBQUlzQixVQUFZLFVBQ2hCdEIsRUFBSXVCLGdCQUFzQixHQUFMVixDQUFPLEdBSXhDLENISVEsQ0FBZ0NyQixFQUFLb0IsSUFDWCxxQkFBbkJBLEVBQUtLLFlBQ1osRUFBWUwsR0FDUixFQUF5QkEsS0FDekJBLEVBQUtpQyxlQUFnQixFQUNyQmpDLEVBQUsrQixhQUFlL0IsRUFBSytCLGFBQWUsR0FHcEQsRUtyQkEsRUFQQSxTQUFtQjlELEVBQTRCeUcsR0FDM0MsTUFBTUMsRUFBUzFHLEVBQWEyRyxxQkFDNUJELEVBQU9FLE9BQVNILEVBQ2hCQyxFQUFPRyxRQUFRN0csRUFBYThHLGFBQzVCSixFQUFPSyxPQUNYLEVDV0EsTUFBTWhHLEVBQVNpRyxTQUFTQyxlQUFlLGtCQUNqQ3RHLEVBQU1JLEVBQU9tRyxXQUFXLE1BRXhCbEgsRUFBZSxJQUFJbUgsYUFDbkI3RyxFQUE2QixDQUMvQkcsVUFBTTJHLEVBQ04xRyxZQUFRMEcsR0FJWixJQUFJQyxFQUFlLEVBQ2ZDLEVBQWUsRUFFbkIsTUFBTXZGLEVDMUI0QixDQUMxQk0sS0FBTSxHQUNOeUIsYUFBYyxFQUNkZ0IsZUFBZ0IsQ0FDWkUsS0FBTSxFQUNORSxLQUFNLEVBQ05ILEtBQU0sRUFDTkUsS0FBTSxHQUVWN0MsVUFBVyxRQUNYRyxjQUFlLEVBQ2ZVLGdCQUFpQixDQUNiaEMsRUFBRyxFQUNIQyxFQUFHLEdBRVA2QyxZQUFZLEVBQ1phLHdCQUF5QixDQUNyQjNELEVBQUcsRUFDSEMsRUFBRyxHQUVQOEMsZUFBZSxFQUNmdUMsZUFBZSxFQUNmWixpQkFBaUIsR0RLbkJwQixFRTNCNkIsQ0FDM0JJLFlBQWEsQ0FDVDFELEVBQUcsRUFDSEMsRUFBRyxHQUVQaUUsb0JBQW9CLEdGd0M1QixTQUFTb0MsSUFDTGhELEVBQU1JLFlBVFYsV0FDSSxNQUFNNkMsRUFBV3pHLEVBQU8wRyx3QkFJeEIsTUFBTyxDQUFFeEcsRUFIQzJCLEtBQUs4RSxNQUFNTCxFQUFlRyxFQUFTdkcsR0FHakNDLEVBRkYwQixLQUFLOEUsTUFBTUosRUFBZUUsRUFBU3RHLEdBR2pELENBR3dCeUcsR0FFcEIsRUFBT2hILEVBQUtvQixFQUFNd0MsR0FFZHhDLEVBQUtpQyxjQUNMLEVBQVVqQyxHQUFNNkYsTUFBSyxLQUNqQkMsT0FBT0Msc0JBQXNCUCxFQUFLLEtBSzFDLEVBQUs1RyxFQUFLb0IsR0d2RGQsU0FBb0IvQixFQUE0QitCLEVBQWlCekIsR0FDekR5QixFQUFLd0UsZUFBaUJqRyxFQUFhRyxNQUNuQyxFQUFVVCxFQUFjTSxFQUFhRyxNQUVyQ3NCLEVBQUs0RCxpQkFBbUJyRixFQUFhSSxRQUNyQyxFQUFVVixFQUFjTSxFQUFhSSxRQUV6Q3FCLEVBQUt3RSxlQUFnQixFQUNyQnhFLEVBQUs0RCxpQkFBa0IsQ0FDM0IsQ0grQ0ksQ0FBVzNGLEVBQWMrQixFQUFNekIsR0FFL0J1SCxPQUFPQyxzQkFBc0JQLEdBQ2pDLENBRUEsU0FBU1EsRUFBWUMsR0FDakJ6RCxFQUFNWSxxQkFBeUMsR0FBbkI2QyxFQUFFQyxTQUM5QlosRUFBZVcsRUFBRUUsUUFDakJaLEVBQWVVLEVBQUVHLE9BQ3JCLENBa0JBLFNBQVNDLEVBQWdCSixHQUNyQnpELEVBQU1ZLG9CQUFxQixDQUMvQixDQWxCQTZCLFNBQVNxQixpQkFBaUIsWUFBYU4sR0FDdkNmLFNBQVNxQixpQkFBaUIsWUFBYU4sR0FDdkNmLFNBQVNxQixpQkFBaUIsVUFBV04sR0FrQnJDaEgsRUFBT3NILGlCQUFpQixjQWhCeEIsU0FBMEJMLEdBQ3RCekQsRUFBTVksb0JBQXFCLEVBQzNCa0MsRUFBZVcsRUFBRU0sZUFBZSxHQUFHSixRQUNuQ1osRUFBZVUsRUFBRU0sZUFBZSxHQUFHSCxPQUN2QyxJQWFBcEgsRUFBT3NILGlCQUFpQixhQVh4QixTQUF5QkwsR0FDckJBLEVBQUVPLGlCQUNGbEIsRUFBZVcsRUFBRU0sZUFBZSxHQUFHSixRQUNuQ1osRUFBZVUsRUFBRU0sZUFBZSxHQUFHSCxPQUN2QyxJQVFBcEgsRUFBT3NILGlCQUFpQixXQUFZRCxHQUNwQ3JILEVBQU9zSCxpQkFBaUIsY0FBZUQsR0FTdkNySCxFQUFPc0gsaUJBQWlCLFNBUHhCLFNBQTJCTCxHQUN2QkEsRUFBRU8saUJBQ3FCLFVBQW5CeEcsRUFBS0ssWUFDTEwsRUFBS0ssVUFBWSxpQkFFekIsSUFuRUEsVywyQ0FDVSxFQUFVcEMsRUFBY00sU0FDeEIsRUFBVXlCLEVBQ3BCLEUsK1JBb0VBeUcsR0FBT1osTUFBSyxLQUNSQyxPQUFPQyxzQkFBc0JQLEVBQUssSUFDbkNrQixPQUFPVCxJQUNOM0IsUUFBUXFDLE1BQU0sd0JBQ2RyQyxRQUFRcUMsTUFBTVYsRUFBRSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvYXVkaW8vbG9hZEF1ZGlvQnVmZmVyRnJvbUZpbGUudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvYXVkaW8vbG9hZEF1ZGlvLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL3V0aWwvZ2V0T3JpZ2luRm9yU3BhY2UudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvZHJhdy9kcmF3Q2FyLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL2RyYXcvY2FyQ29sb3JzLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL2RyYXcvcHJpbWFyeUNhckNvbG9yLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL2RyYXcvZHJhdy50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy9kcmF3L2NsZWFyU2NyZWVuLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL2RyYXcvZHJhd0dyaWQudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvZHJhdy9kcmF3Q2Fycy50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy9kcmF3L2RyYXdCb3JkZXIudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvZHJhdy9kcmF3SGVsZENhci50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy9kcmF3L2RyYXdUaXRsZVNjcmVlblRleHQudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvdXRpbC9jYXJzRnJvbUxldmVsRmlsZS50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91cGRhdGUvcmVzZXRHYW1lLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL3V0aWwvYXJlQWxsQW5pbWF0aW9uc0ZpbmlzaGVkLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL3V0aWwvaXNDb29yZGluYXRlT3ZlckNhci50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91dGlsL2lzQW55Q2FySW5TcGFjZS50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91dGlsL2dldEhlbGRDYXJQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91dGlsL2dldFRhcmdldEhlbGRDYXJQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91cGRhdGUvdXBkYXRlR3JhYlN0YXRlLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL3V0aWwvZ2V0Q2FyQXRNb3VzZUNvb3JkaW5hdGVzLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL3V0aWwvZ2V0RHJhZ0JvdW5kYXJpZXMudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvdXRpbC9nZXROZWFyZXN0U3BhY2VGb3JDb29yZGluYXRlcy50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91cGRhdGUvYW5pbWF0ZUNhcnMudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvdXBkYXRlL3VwZGF0ZS50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91cGRhdGUvdXBkYXRlVG9QbGF5UGhhc2UudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvdXBkYXRlL3VwZGF0ZUhlbGRDYXJQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91cGRhdGUvdXBkYXRlVG9UZWFyRG93blBoYXNlSWZMZXZlbFdvbi50cyIsIndlYnBhY2s6Ly9ncmlkbG9jay8uL3NyYy91dGlsL2lzTGV2ZWxDb21wbGV0ZWQudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvYXVkaW8vcGxheVNvdW5kLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL2dyaWRsb2NrLnRzIiwid2VicGFjazovL2dyaWRsb2NrLy4vc3JjL3V0aWwvZ2V0RW1wdHlHYW1lU3RhdGUudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvdXRpbC9nZXRFbXB0eUlucHV0U3RhdGUudHMiLCJ3ZWJwYWNrOi8vZ3JpZGxvY2svLi9zcmMvYXVkaW8vcGxheVNvdW5kcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyBmdW5jdGlvbiBsb2FkQXVkaW9CdWZmZXJGcm9tRmlsZShhdWRpb0NvbnRleHQ6IEF1ZGlvQ29udGV4dCwgcGF0aDogc3RyaW5nKTogUHJvbWlzZTxBdWRpb0J1ZmZlcj4ge1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChwYXRoKTtcbiAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IHJlc3AuYXJyYXlCdWZmZXIoKTtcblxuICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gYXdhaXQgYXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1ZmZlcik7XG5cbiAgICByZXR1cm4gYXVkaW9CdWZmZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGxvYWRBdWRpb0J1ZmZlckZyb21GaWxlO1xuIiwiaW1wb3J0IEF1ZGlvQnVmZmVycyBmcm9tICdAaW50ZXJmYWNlcy9hdWRpb0J1ZmZlcnMnO1xuXG5pbXBvcnQgbG9hZEF1ZGlvQnVmZmVyRnJvbUZpbGUgZnJvbSAnLi9sb2FkQXVkaW9CdWZmZXJGcm9tRmlsZSc7XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRBdWRpbyhhdWRpb0NvbnRleHQ6IEF1ZGlvQ29udGV4dCwgYXVkaW9CdWZmZXJzOiBBdWRpb0J1ZmZlcnMpIHtcbiAgICBjb25zdCBkcm9wU291bmRCdWZmZXIgPSBhd2FpdCBsb2FkQXVkaW9CdWZmZXJGcm9tRmlsZShhdWRpb0NvbnRleHQsICdzZngvcG9wNy53YXYnKTtcbiAgICBjb25zdCBwaWNrdXBTb3VuZEJ1ZmZlciA9IGF3YWl0IGxvYWRBdWRpb0J1ZmZlckZyb21GaWxlKGF1ZGlvQ29udGV4dCwgJ3NmeC9wb3AyLndhdicpO1xuXG4gICAgYXVkaW9CdWZmZXJzLmRyb3AgPSBkcm9wU291bmRCdWZmZXI7XG4gICAgYXVkaW9CdWZmZXJzLnBpY2t1cCA9IHBpY2t1cFNvdW5kQnVmZmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBsb2FkQXVkaW87XG4iLCJpbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSAnQGludGVyZmFjZXMvY29vcmRpbmF0ZXMnO1xuXG5mdW5jdGlvbiBnZXRPcmlnaW5Gb3JTcGFjZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgc3BhY2VYOiBudW1iZXIsIHNwYWNlWTogbnVtYmVyKTogQ29vcmRpbmF0ZXMge1xuICAgIGNvbnN0IHdpZHRoID0gY3R4LmNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBjdHguY2FudmFzLmhlaWdodDtcbiAgICBcbiAgICBjb25zdCBib3JkZXJXaWR0aCA9ICh3aWR0aCAvIDE0KTtcbiAgICBjb25zdCBib3JkZXJIZWlnaHQgPSAoaGVpZ2h0IC8gMTQpO1xuXG4gICAgY29uc3Qgc3BhY2VXaWR0aCA9ICh3aWR0aCAvIDcpO1xuICAgIGNvbnN0IHNwYWNlSGVpZ2h0ID0gKGhlaWdodCAvIDcpO1xuXG4gICAgY29uc3Qgb3JpZ2luWCA9IGJvcmRlcldpZHRoICsgc3BhY2VYICogc3BhY2VXaWR0aDtcbiAgICBjb25zdCBvcmlnaW5ZID0gYm9yZGVySGVpZ2h0ICsgc3BhY2VZICogc3BhY2VIZWlnaHQ7XG5cbiAgICBjb25zdCBvcmlnaW46IENvb3JkaW5hdGVzID0ge1xuICAgICAgICB4OiBvcmlnaW5YLFxuICAgICAgICB5OiBvcmlnaW5ZXG4gICAgfVxuXG4gICAgcmV0dXJuIG9yaWdpbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0T3JpZ2luRm9yU3BhY2U7XG4iLCJpbXBvcnQgQ2FyIGZyb20gJ0BpbnRlcmZhY2VzL2Nhcic7XG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSAnQGludGVyZmFjZXMvY29vcmRpbmF0ZXMnO1xuXG5mdW5jdGlvbiBkcmF3Q2FyKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjYXI6IENhciwgY29sb3I6IHN0cmluZywgcG9zaXRpb246IENvb3JkaW5hdGVzLCBoaWdobGlnaHQ6IGJvb2xlYW4pIHtcbiAgICBjb25zdCB3aWR0aCA9IGN0eC5jYW52YXMud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gY3R4LmNhbnZhcy5oZWlnaHQ7XG5cbiAgICBjb25zdCBzcGFjZVdpZHRoID0gd2lkdGggLyA3O1xuICAgIGNvbnN0IHNwYWNlSGVpZ2h0ID0gaGVpZ2h0IC8gNztcblxuICAgIGxldCBjYXJXaWR0aDogbnVtYmVyLCBjYXJIZWlnaHQ6IG51bWJlcjtcblxuICAgIGlmIChjYXIub3JpZW50YXRpb24gPT09ICdoJykge1xuICAgICAgICBjYXJIZWlnaHQgPSBzcGFjZUhlaWdodDtcbiAgICAgICAgY2FyV2lkdGggPSBzcGFjZVdpZHRoICogY2FyLnNpemU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2FySGVpZ2h0ID0gc3BhY2VIZWlnaHQgKiBjYXIuc2l6ZTtcbiAgICAgICAgY2FyV2lkdGggPSBzcGFjZVdpZHRoO1xuICAgIH1cblxuICAgIGlmIChoaWdobGlnaHQpIHtcbiAgICAgICAgY2FyV2lkdGggKz0gMTA7XG4gICAgICAgIGNhckhlaWdodCArPSAxMDtcbiAgICAgICAgcG9zaXRpb24ueCAtPSA1O1xuICAgICAgICBwb3NpdGlvbi55IC09IDU7XG4gICAgfVxuXG4gICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgIGN0eC5maWxsUmVjdChwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBjYXJXaWR0aCwgY2FySGVpZ2h0KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZHJhd0NhcjsiLCJjb25zdCBjYXJDb2xvcnMgPSBbXG4gICAgJyNGRkVGOUUnLFxuICAgICcjRDJGRjlFJyxcbiAgICAnIzlFRkZBOCcsXG4gICAgJyM5RUZGRTUnLFxuICAgICcjOUVEQkZGJyxcbiAgICAnIzlFOUVGRicsXG4gICAgJyNEQjlFRkYnLFxuICAgICcjRkY5RUU1JyxcbiAgICAnI0ZGOUVBOCcsXG4gICAgJyNGRkQwOUUnXG5dO1xuXG5leHBvcnQgZGVmYXVsdCBjYXJDb2xvcnM7IiwiY29uc3QgcHJpbWFyeUNhckNvbG9yID0gJyNmZjAwMDAnO1xuXG5leHBvcnQgZGVmYXVsdCBwcmltYXJ5Q2FyQ29sb3I7XG4iLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2dhbWVTdGF0ZSc7XG5cbmltcG9ydCBjbGVhclNjcmVlbiBmcm9tICcuL2NsZWFyU2NyZWVuJztcbmltcG9ydCBkcmF3Qm9yZGVyIGZyb20gJy4vZHJhd0JvcmRlcic7XG5pbXBvcnQgZHJhd0dyaWQgZnJvbSAnLi9kcmF3R3JpZCc7XG5pbXBvcnQgZHJhd0NhcnMgZnJvbSAnLi9kcmF3Q2Fycyc7XG5pbXBvcnQgZHJhd0hlbGRDYXIgZnJvbSAnLi9kcmF3SGVsZENhcic7XG5pbXBvcnQgZHJhd1RpdGxlU2NyZWVuVGV4dCBmcm9tICcuL2RyYXdUaXRsZVNjcmVlblRleHQnO1xuXG5mdW5jdGlvbiBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBnYW1lOiBHYW1lU3RhdGUpIHtcbiAgICBjbGVhclNjcmVlbihjdHgpO1xuICAgIGRyYXdHcmlkKGN0eCk7XG4gICAgaWYgKGdhbWUuZ2FtZVBoYXNlICE9PSAndGl0bGUnKSB7XG4gICAgICAgIGRyYXdDYXJzKGN0eCwgZ2FtZSk7XG4gICAgfVxuICAgIGRyYXdCb3JkZXIoY3R4KTtcbiAgICBkcmF3SGVsZENhcihjdHgsIGdhbWUpO1xuICAgIGlmIChnYW1lLmdhbWVQaGFzZSA9PT0gJ3RpdGxlJykge1xuICAgICAgICBkcmF3VGl0bGVTY3JlZW5UZXh0KGN0eCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBkcmF3O1xuIiwiZnVuY3Rpb24gY2xlYXJTY3JlZW4oY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAwMDAnO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsZWFyU2NyZWVuO1xuIiwiZnVuY3Rpb24gZHJhd0dyaWQoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICBjb25zdCB3aWR0aCA9IGN0eC5jYW52YXMud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gY3R4LmNhbnZhcy5oZWlnaHQ7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjMzAzMDMwJztcbiAgICBjdHguZmlsbFJlY3Qod2lkdGggLyAxNCwgaGVpZ2h0IC8gMTQsIDYgKiB3aWR0aCAvIDcsIDYgKiBoZWlnaHQgLyA3KTtcblxuICAgIGN0eC5maWxsU3R5bGUgPSAnIzYwNjA2MCc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyArK2kpIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA2OyArK2opIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSAod2lkdGggLyAxNCkgKyAoMyAqIHdpZHRoIC8gNTYpICsgKGkgKiB3aWR0aCAvIDcpO1xuICAgICAgICAgICAgY29uc3QgeSA9IChoZWlnaHQgLyAxNCkgKyAoMyAqIGhlaWdodCAvIDU2KSArIChqICogaGVpZ2h0IC8gNyk7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGggLyAyOCwgaGVpZ2h0IC8gMjgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZXhpdFggPSAxMyAqIGhlaWdodCAvIDE0O1xuICAgIGNvbnN0IGV4aXRZID0gNSAqIGhlaWdodCAvIDE0O1xuICAgIGN0eC5maWxsU3R5bGUgPSAnIzMwMzAzMCc7XG4gICAgY3R4LmZpbGxSZWN0KGV4aXRYLCBleGl0WSwgd2lkdGggLyAxNCwgaGVpZ2h0IC8gNyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRyYXdHcmlkOyIsImltcG9ydCBHYW1lU3RhdGUgZnJvbSAnQGludGVyZmFjZXMvZ2FtZVN0YXRlJztcblxuaW1wb3J0IGdldE9yaWdpbkZvclNwYWNlIGZyb20gJ0B1dGlsL2dldE9yaWdpbkZvclNwYWNlJztcblxuaW1wb3J0IGRyYXdDYXIgZnJvbSAnLi9kcmF3Q2FyJztcbmltcG9ydCBjYXJDb2xvcnMgZnJvbSAnLi9jYXJDb2xvcnMnO1xuaW1wb3J0IHByaW1hcnlDYXJDb2xvciBmcm9tICcuL3ByaW1hcnlDYXJDb2xvcic7XG5cblxuXG5mdW5jdGlvbiBkcmF3Q2FycyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZ2FtZTogR2FtZVN0YXRlKTogdm9pZCB7XG4gICAgZ2FtZS5jYXJzLmZvckVhY2goKGNhciwgaSkgPT4ge1xuICAgICAgICBjb25zdCBjb2xvciA9IGkgPT09IDAgPyBwcmltYXJ5Q2FyQ29sb3IgOiBjYXJDb2xvcnNbaV07XG4gICAgICAgIGlmIChpID09PSBnYW1lLmhlbGRDYXJJbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2FyUG9zaXRpb24gPSBnZXRPcmlnaW5Gb3JTcGFjZShjdHgsIGNhci54LCBjYXIueSk7XG4gICAgICAgICAgICBpZiAoY2FyLmFuaW1hdGlvbiA9PT0gJ2luY29taW5nJykge1xuICAgICAgICAgICAgICAgIGlmIChjYXIuYW5pbWF0aW9uRnJhbWUgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSBNYXRoLm1heCgwLCAoMzAgLSBjYXIuYW5pbWF0aW9uRnJhbWUpIC8gMzApO1xuICAgICAgICAgICAgICAgIGNhclBvc2l0aW9uLnkgLT0gKDEvNjApICogTWF0aC5wb3coKGN0eC5jYW52YXMuaGVpZ2h0ICogcmF0aW8pLCAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNhci5hbmltYXRpb24gPT09ICdmYWxsaW5nJykge1xuICAgICAgICAgICAgICAgIGlmIChjYXIuYW5pbWF0aW9uRnJhbWUgPiAzMCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgY2FyLmFuaW1hdGlvbkZyYW1lIC8gMzApKTtcbiAgICAgICAgICAgICAgICBjYXJQb3NpdGlvbi55ICs9ICgxLzYwKSAqIE1hdGgucG93KChjdHguY2FudmFzLmhlaWdodCAqIHJhdGlvKSwgMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcmF3Q2FyKGN0eCwgY2FyLCBjb2xvciwgY2FyUG9zaXRpb24sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChnYW1lLmhlbGRDYXJJbmRleCA+PSAwKSB7XG4gICAgICAgIGNvbnN0IGhlbGRDYXIgPSBnYW1lLmNhcnNbZ2FtZS5oZWxkQ2FySW5kZXhdO1xuICAgICAgICBjb25zdCBjb2xvciA9IGdhbWUuaGVsZENhckluZGV4ID09PSAwID8gcHJpbWFyeUNhckNvbG9yIDogY2FyQ29sb3JzW2dhbWUuaGVsZENhckluZGV4XTtcbiAgICAgICAgY29uc3QgY2FyUG9zaXRpb24gPSB7IC4uLmdhbWUuaGVsZENhclBvc2l0aW9uIH07XG4gICAgICAgICAgICBpZiAoaGVsZENhci5hbmltYXRpb24gPT09ICdmYWxsaW5nJykge1xuICAgICAgICAgICAgICAgIGNhclBvc2l0aW9uLnggKz0gaGVsZENhci5hbmltYXRpb25GcmFtZSAqIDU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcmF3Q2FyKGN0eCwgaGVsZENhciwgY29sb3IsIGNhclBvc2l0aW9uLCB0cnVlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRyYXdDYXJzO1xuIiwiZnVuY3Rpb24gZHJhd0JvcmRlcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIGNvbnN0IHdpZHRoID0gY3R4LmNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBjdHguY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCBib3JkZXJXaWR0aCA9IHdpZHRoIC8gMTQ7XG4gICAgY29uc3QgYm9yZGVySGVpZ2h0ID0gaGVpZ2h0IC8gMTQ7XG4gICAgY29uc3Qgc3BhY2VIZWlnaHQgPSBoZWlnaHQgLyA3O1xuICAgIFxuICAgIGNvbnN0IHRvcEV4aXRCb3JkZXJUb3RhbEhlaWdodCA9IDUgKiBoZWlnaHQgLyAxNDtcbiAgICBjb25zdCBib3R0b21FeGl0Qm9yZGVyVG90YWxoZWlnaHQgPSA3ICogaGVpZ2h0IC8gMTQ7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjNjA2MDYwJztcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgYm9yZGVyV2lkdGgsIGhlaWdodCk7XG4gICAgY3R4LmZpbGxSZWN0KGJvcmRlcldpZHRoLCAwLCAod2lkdGggLSAoMiAqIGJvcmRlcldpZHRoKSksIGJvcmRlckhlaWdodCk7XG4gICAgY3R4LmZpbGxSZWN0KGJvcmRlcldpZHRoLCBoZWlnaHQgLSBib3JkZXJIZWlnaHQsICh3aWR0aCAtICgyICogYm9yZGVyV2lkdGgpKSwgYm9yZGVySGVpZ2h0KTtcbiAgICBjdHguZmlsbFJlY3Qod2lkdGggLSBib3JkZXJXaWR0aCwgMCwgYm9yZGVyV2lkdGgsIHRvcEV4aXRCb3JkZXJUb3RhbEhlaWdodCk7XG4gICAgY3R4LmZpbGxSZWN0KHdpZHRoIC0gYm9yZGVyV2lkdGgsIHRvcEV4aXRCb3JkZXJUb3RhbEhlaWdodCArIHNwYWNlSGVpZ2h0LCBib3JkZXJXaWR0aCwgYm90dG9tRXhpdEJvcmRlclRvdGFsaGVpZ2h0KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZHJhd0JvcmRlcjtcbiIsImltcG9ydCBHYW1lU3RhdGUgZnJvbSAnQGludGVyZmFjZXMvZ2FtZVN0YXRlJztcblxuaW1wb3J0IHByaW1hcnlDYXJDb2xvciBmcm9tICcuL3ByaW1hcnlDYXJDb2xvcic7XG5pbXBvcnQgY2FyQ29sb3JzIGZyb20gJy4vY2FyQ29sb3JzJztcbmltcG9ydCBkcmF3Q2FyIGZyb20gJy4vZHJhd0Nhcic7XG5cbmZ1bmN0aW9uIGRyYXdIZWxkQ2FyKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBnYW1lOiBHYW1lU3RhdGUpOiB2b2lkIHtcbiAgICBpZiAoZ2FtZS5oZWxkQ2FySW5kZXggPj0gMCkge1xuICAgICAgICBjb25zdCBoZWxkQ2FyID0gZ2FtZS5jYXJzW2dhbWUuaGVsZENhckluZGV4XTtcbiAgICAgICAgY29uc3QgY29sb3IgPSBnYW1lLmhlbGRDYXJJbmRleCA9PT0gMCA/IHByaW1hcnlDYXJDb2xvciA6IGNhckNvbG9yc1tnYW1lLmhlbGRDYXJJbmRleF07XG4gICAgICAgIGNvbnN0IGNhclBvc2l0aW9uID0geyAuLi5nYW1lLmhlbGRDYXJQb3NpdGlvbiB9O1xuICAgICAgICAgICAgaWYgKGhlbGRDYXIuYW5pbWF0aW9uID09PSAnZmFsbGluZycpIHtcbiAgICAgICAgICAgICAgICBjYXJQb3NpdGlvbi54ICs9IGhlbGRDYXIuYW5pbWF0aW9uRnJhbWUgKiA1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZHJhd0NhcihjdHgsIGhlbGRDYXIsIGNvbG9yLCBjYXJQb3NpdGlvbiwgdHJ1ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBkcmF3SGVsZENhcjtcbiIsImZ1bmN0aW9uIGRyYXdUaXRsZVNjcmVlblRleHQoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICBjb25zdCB3aWR0aCA9IGN0eC5jYW52YXMud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gY3R4LmNhbnZhcy5oZWlnaHQ7XG5cbiAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgIGN0eC5mb250ID0gXCI0OHB4IFxcXCJEb3Npc1xcXCIsIHNhbnMtc2VyaWZcIjtcbiAgICBjdHguZmlsbFN0eWxlID0gJyNmZmZmZmYnO1xuICAgIGN0eC5maWxsVGV4dChcIkNsaWNrIG9yIFRhcCB0byBTdGFydFwiLCB3aWR0aC8yLCBoZWlnaHQvMik7XG5cblxufVxuXG5leHBvcnQgZGVmYXVsdCBkcmF3VGl0bGVTY3JlZW5UZXh0O1xuIiwiaW1wb3J0IENhciBmcm9tICdAaW50ZXJmYWNlcy9jYXInO1xuXG5hc3luYyBmdW5jdGlvbiBjYXJzZnJvbUxldmVsRmlsZShwYXRoOiBzdHJpbmcpOiBQcm9taXNlPENhcltdPiB7XG4gICAgY29uc3QgbGV2ZWxSZXNwb25zZSA9IGF3YWl0IGZldGNoKHBhdGgpO1xuICAgIGNvbnN0IGxldmVsSnNvbiA9IGF3YWl0IGxldmVsUmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnN0IGNhcnMgPSBsZXZlbEpzb24uY2FycyBhcyBDYXJbXTtcbiAgICByZXR1cm4gY2Fycztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2Fyc2Zyb21MZXZlbEZpbGU7XG4iLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2dhbWVTdGF0ZSc7XG5cbmltcG9ydCBjYXJzZnJvbUxldmVsRmlsZSBmcm9tICdAdXRpbC9jYXJzRnJvbUxldmVsRmlsZSc7XG5cbmFzeW5jIGZ1bmN0aW9uIHJlc2V0R2FtZShnYW1lU3RhdGU6IEdhbWVTdGF0ZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxldCBsZXZlbEZpbGU6IHN0cmluZztcbiAgICBzd2l0Y2goZ2FtZVN0YXRlLmN1cnJlbnRMZXZlbCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBsZXZlbEZpbGUgPSAnbGV2ZWxzL2xldmVsMDEuanNvbic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgbGV2ZWxGaWxlID0gJ2xldmVscy9sZXZlbDExLmpzb24nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGxldmVsRmlsZSA9ICdsZXZlbHMvbGV2ZWwyMS5qc29uJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBsZXZlbEZpbGUgPSAnbGV2ZWxzL2xldmVsMzEuanNvbic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGxldmVsRmlsZSA9ICdsZXZlbHMvbGV2ZWwzMS5qc29uJztcbiAgICB9XG4gICAgZ2FtZVN0YXRlLmNhcnMgPSBhd2FpdCBjYXJzZnJvbUxldmVsRmlsZShsZXZlbEZpbGUpO1xuICAgIGdhbWVTdGF0ZS5ob2xkaW5nQ2FyID0gZmFsc2U7XG4gICAgZ2FtZVN0YXRlLmhlbGRDYXJJbmRleCA9IC0xO1xuICAgIGdhbWVTdGF0ZS5sZXZlbENvbXBsZXRlID0gZmFsc2U7XG4gICAgaWYgKGdhbWVTdGF0ZS5nYW1lUGhhc2UgIT09ICd0aXRsZScpIHtcbiAgICAgICAgZ2FtZVN0YXRlLmdhbWVQaGFzZSA9ICdzZXR0aW5nVXBMZXZlbCc7XG4gICAgfVxuXG4gICAgZ2FtZVN0YXRlLmNhcnMuZm9yRWFjaCgoY2FyLCBpKSA9PiB7XG4gICAgICAgIGNhci5hbmltYXRpb25GcmFtZSA9IGkgKiAtMTA7XG4gICAgICAgIGNhci5hbmltYXRpb24gPSAnaW5jb21pbmcnO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCByZXNldEdhbWU7IiwiaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICdAaW50ZXJmYWNlcy9nYW1lU3RhdGUnO1xuXG5mdW5jdGlvbiBhcmVBbGxBbmltYXRpb25zRmluaXNoZWQoZ2FtZTogR2FtZVN0YXRlKSB7XG4gICAgcmV0dXJuICEoZ2FtZS5jYXJzLnNvbWUoY2FyID0+IGNhci5hbmltYXRpb25GcmFtZSA8IDMwKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFyZUFsbEFuaW1hdGlvbnNGaW5pc2hlZDtcbiIsImltcG9ydCBDYXIgZnJvbSAnQGludGVyZmFjZXMvY2FyJztcbmltcG9ydCBDb29yZGluYXRlcyBmcm9tICdAaW50ZXJmYWNlcy9jb29yZGluYXRlcyc7XG5cbmltcG9ydCBnZXRPcmlnaW5Gb3JTcGFjZSBmcm9tICcuL2dldE9yaWdpbkZvclNwYWNlJztcblxuZnVuY3Rpb24gaXNDb29yZGluYXRlT3ZlckNhcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY2FyOiBDYXIsIGNhbnZhc01vdXNlQ29vcmRzOiBDb29yZGluYXRlcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgeDogY2FudmFzTW91c2VYLCB5OiBjYW52YXNNb3VzZVkgfSA9IGNhbnZhc01vdXNlQ29vcmRzO1xuICAgIFxuICAgIGNvbnN0IHdpZHRoID0gY3R4LmNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBjdHguY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCBzcGFjZVdpZHRoID0gd2lkdGggLyA3O1xuICAgIGNvbnN0IHNwYWNlSGVpZ2h0ID0gaGVpZ2h0IC8gNztcblxuICAgIGNvbnN0IHt4OiBjYXJYLCB5OiBjYXJZfSA9IGdldE9yaWdpbkZvclNwYWNlKGN0eCwgY2FyLngsIGNhci55KTtcbiAgICBsZXQgY2FyV2lkdGg6IG51bWJlciwgY2FySGVpZ2h0OiBudW1iZXI7XG4gICAgaWYgKGNhci5vcmllbnRhdGlvbiA9PT0gJ2gnKSB7XG4gICAgICAgIGNhcldpZHRoID0gY2FyLnNpemUgKiBzcGFjZVdpZHRoO1xuICAgICAgICBjYXJIZWlnaHQgPSBzcGFjZUhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjYXJXaWR0aCA9IHNwYWNlV2lkdGg7XG4gICAgICAgIGNhckhlaWdodCA9IGNhci5zaXplICogc3BhY2VIZWlnaHQ7XG4gICAgfVxuXG4gICAgY29uc3QgbW91c2VPdmVyQ2FyID0gXG4gICAgICAgIGNhbnZhc01vdXNlWCA+PSBjYXJYICYmIFxuICAgICAgICBjYW52YXNNb3VzZVggPD0gY2FyWCArIGNhcldpZHRoICYmXG4gICAgICAgIGNhbnZhc01vdXNlWSA+PSBjYXJZICYmXG4gICAgICAgIGNhbnZhc01vdXNlWSA8PSBjYXJZICsgY2FySGVpZ2h0O1xuXG4gICAgcmV0dXJuIG1vdXNlT3ZlckNhcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgaXNDb29yZGluYXRlT3ZlckNhcjtcbiIsImltcG9ydCBDYXIgZnJvbSAnQGludGVyZmFjZXMvY2FyJztcblxuZnVuY3Rpb24gaXNBbnlDYXJJblNwYWNlKHNwYWNlWDogbnVtYmVyLCBzcGFjZVk6IG51bWJlciwgY2FyczogQ2FyW10pIHtcbiAgICBmb3IgKGNvbnN0IGNhciBvZiBjYXJzKSB7XG4gICAgICAgIGlmIChjYXIub3JpZW50YXRpb24gPT0gJ2gnKSB7XG4gICAgICAgICAgICBpZiAoY2FyLnkgPT09IHNwYWNlWSAmJlxuICAgICAgICAgICAgICAgIHNwYWNlWCA+PSBjYXIueCAmJlxuICAgICAgICAgICAgICAgIHNwYWNlWCA8IGNhci54ICsgY2FyLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY2FyLnggPT09IHNwYWNlWCAmJlxuICAgICAgICAgICAgICAgIHNwYWNlWSA+PSBjYXIueSAmJlxuICAgICAgICAgICAgICAgIHNwYWNlWSA8IGNhci55ICsgY2FyLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBpc0FueUNhckluU3BhY2U7XG4iLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2dhbWVTdGF0ZSc7XG5pbXBvcnQgSW5wdXRTdGF0ZSBmcm9tICdAaW50ZXJmYWNlcy9pbnB1dFN0YXRlJztcblxuaW1wb3J0IGdldFRhcmdldEhlbGRDYXJQb3NpdGlvbiBmcm9tICcuL2dldFRhcmdldEhlbGRDYXJQb3NpdGlvbic7XG5cbmZ1bmN0aW9uIGdldEhlbGRDYXJQb3NpdGlvbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZ2FtZTogR2FtZVN0YXRlLCBpbnB1dDogSW5wdXRTdGF0ZSkge1xuICAgIFxuICAgIGNvbnN0IHRhcmdldEhlbGRDYXJQb3NpdGlvbiA9IGdldFRhcmdldEhlbGRDYXJQb3NpdGlvbihjdHgsIGdhbWUsIGlucHV0KTtcbiAgICBjb25zdCBoZWxkQ2FyUG9zaXRpb24gPSB7XG4gICAgICAgIHg6IE1hdGgubWF4KGdhbWUuZHJhZ0JvdW5kYXJpZXMubWluWCwgTWF0aC5taW4oZ2FtZS5kcmFnQm91bmRhcmllcy5tYXhYLCB0YXJnZXRIZWxkQ2FyUG9zaXRpb24ueCkpLFxuICAgICAgICB5OiBNYXRoLm1heChnYW1lLmRyYWdCb3VuZGFyaWVzLm1pblksIE1hdGgubWluKGdhbWUuZHJhZ0JvdW5kYXJpZXMubWF4WSwgdGFyZ2V0SGVsZENhclBvc2l0aW9uLnkpKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaGVsZENhclBvc2l0aW9uO1xufVxuZXhwb3J0IGRlZmF1bHQgZ2V0SGVsZENhclBvc2l0aW9uOyIsImltcG9ydCBDb29yZGluYXRlcyBmcm9tICdAaW50ZXJmYWNlcy9jb29yZGluYXRlcyc7XG5pbXBvcnQgR2FtZVN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2dhbWVTdGF0ZSc7XG5pbXBvcnQgSW5wdXRTdGF0ZSBmcm9tICdAaW50ZXJmYWNlcy9pbnB1dFN0YXRlJztcblxuaW1wb3J0IGdldE9yaWdpbkZvclNwYWNlIGZyb20gJy4vZ2V0T3JpZ2luRm9yU3BhY2UnO1xuXG5mdW5jdGlvbiBnZXRUYXJnZXRIZWxkQ2FyUG9zaXRpb24oY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGdhbWU6IEdhbWVTdGF0ZSwgaW5wdXQ6IElucHV0U3RhdGUpOiBDb29yZGluYXRlcyB7XG4gICAgY29uc3QgaGVsZENhciA9IGdhbWUuY2Fyc1tnYW1lLmhlbGRDYXJJbmRleF07XG4gICAgY29uc3QgaGVsZENhck9yaWdpbiA9IGdldE9yaWdpbkZvclNwYWNlKGN0eCwgaGVsZENhci54LCBoZWxkQ2FyLnkpO1xuICAgIGNvbnN0IGRyYWdYID0gaW5wdXQuY2FudmFzTW91c2UueCAtIGdhbWUuaG9sZE9yaWdpbmFsQ2FudmFzTW91c2UueDtcbiAgICBjb25zdCBkcmFnWSA9IGlucHV0LmNhbnZhc01vdXNlLnkgLSBnYW1lLmhvbGRPcmlnaW5hbENhbnZhc01vdXNlLnk7XG4gICAgY29uc3QgdGFyZ2V0SGVsZENhclBvc2l0aW9uWCA9IGhlbGRDYXJPcmlnaW4ueCArIGRyYWdYO1xuICAgIGNvbnN0IHRhcmdldEhlbGRDYXJQb3NpdGlvblkgPSBoZWxkQ2FyT3JpZ2luLnkgKyBkcmFnWTtcbiAgICByZXR1cm4geyB4OiB0YXJnZXRIZWxkQ2FyUG9zaXRpb25YLCB5OiB0YXJnZXRIZWxkQ2FyUG9zaXRpb25ZIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldFRhcmdldEhlbGRDYXJQb3NpdGlvbjtcbiIsImltcG9ydCBHYW1lU3RhdGUgZnJvbSAnQGludGVyZmFjZXMvZ2FtZVN0YXRlJztcbmltcG9ydCBJbnB1dFN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2lucHV0U3RhdGUnO1xuXG5pbXBvcnQgZ2V0Q2FyQXRNb3VzZUNvb3JkaW5hdGVzIGZyb20gJ0B1dGlsL2dldENhckF0TW91c2VDb29yZGluYXRlcyc7XG5pbXBvcnQgZ2V0RHJhZ0JvdW5kYXJpZXMgZnJvbSAnQHV0aWwvZ2V0RHJhZ0JvdW5kYXJpZXMnO1xuaW1wb3J0IGdldEhlbGRDYXJQb3NpdGlvbiBmcm9tICdAdXRpbC9nZXRIZWxkQ2FyUG9zaXRpb24nO1xuaW1wb3J0IGdldE5lYXJlc3RTcGFjZUZvckNvb3JkaW5hdGVzIGZyb20gJ0B1dGlsL2dldE5lYXJlc3RTcGFjZUZvckNvb3JkaW5hdGVzJztcblxuZnVuY3Rpb24gdXBkYXRlR3JhYlN0YXRlKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBnYW1lOiBHYW1lU3RhdGUsIGlucHV0OiBJbnB1dFN0YXRlKSB7XG4gICAgaWYgKCFnYW1lLmhvbGRpbmdDYXIgJiYgaW5wdXQubW91c2VCdXR0b25QcmVzc2VkKSB7XG4gICAgICAgIGdhbWUuaG9sZGluZ0NhciA9IHRydWU7XG4gICAgICAgIGdhbWUuaGVsZENhckluZGV4ID0gZ2V0Q2FyQXRNb3VzZUNvb3JkaW5hdGVzKGN0eCwgZ2FtZSwgaW5wdXQpO1xuICAgICAgICBnYW1lLmhvbGRPcmlnaW5hbENhbnZhc01vdXNlID0geyAuLi5pbnB1dC5jYW52YXNNb3VzZSB9O1xuICAgICAgICBpZiAoZ2FtZS5oZWxkQ2FySW5kZXggPj0gMCkge1xuICAgICAgICAgICAgZ2FtZS5kcmFnQm91bmRhcmllcyA9IGdldERyYWdCb3VuZGFyaWVzKGN0eCwgZ2FtZSk7XG4gICAgICAgICAgICBnYW1lLnBsYXlQaWNrdXBTb3VuZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZ2FtZS5ob2xkaW5nQ2FyICYmICFpbnB1dC5tb3VzZUJ1dHRvblByZXNzZWQpIHtcbiAgICAgICAgaWYgKGdhbWUuaGVsZENhckluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGhlbGRDYXJQb3NpdGlvbiA9IGdldEhlbGRDYXJQb3NpdGlvbihjdHgsIGdhbWUsIGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1NwYWNlQ29vcmRzID0gZ2V0TmVhcmVzdFNwYWNlRm9yQ29vcmRpbmF0ZXMoY3R4LCBoZWxkQ2FyUG9zaXRpb24pO1xuICAgICAgICAgICAgZ2FtZS5jYXJzW2dhbWUuaGVsZENhckluZGV4XS54ID0gbmV3U3BhY2VDb29yZHMueDtcbiAgICAgICAgICAgIGdhbWUuY2Fyc1tnYW1lLmhlbGRDYXJJbmRleF0ueSA9IG5ld1NwYWNlQ29vcmRzLnk7XG4gICAgICAgICAgICBnYW1lLnBsYXlEcm9wU291bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGdhbWUuaG9sZGluZ0NhciA9IGZhbHNlO1xuICAgICAgICBnYW1lLmhlbGRDYXJJbmRleCA9IC0xO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdXBkYXRlR3JhYlN0YXRlOyIsImltcG9ydCBHYW1lU3RhdGUgZnJvbSAnQGludGVyZmFjZXMvZ2FtZVN0YXRlJztcbmltcG9ydCBJbnB1dFN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2lucHV0U3RhdGUnO1xuXG5pbXBvcnQgaXNDb29yZGluYXRlT3ZlckNhciBmcm9tICcuL2lzQ29vcmRpbmF0ZU92ZXJDYXInO1xuXG5mdW5jdGlvbiBnZXRDYXJBdE1vdXNlQ29vcmRpbmF0ZXMoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGdhbWU6IEdhbWVTdGF0ZSwgaW5wdXQ6IElucHV0U3RhdGUpOiBudW1iZXIge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZS5jYXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChpc0Nvb3JkaW5hdGVPdmVyQ2FyKGN0eCwgZ2FtZS5jYXJzW2ldLCBpbnB1dC5jYW52YXNNb3VzZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0Q2FyQXRNb3VzZUNvb3JkaW5hdGVzO1xuIiwiaW1wb3J0IERyYWdCb3VuZGFyaWVzIGZyb20gJ0BpbnRlcmZhY2VzL2RyYWdCb3VuZGFyaWVzJztcbmltcG9ydCBHYW1lU3RhdGUgZnJvbSAnQGludGVyZmFjZXMvZ2FtZVN0YXRlJztcblxuaW1wb3J0IGdldE9yaWdpbkZvclNwYWNlIGZyb20gJy4vZ2V0T3JpZ2luRm9yU3BhY2UnO1xuaW1wb3J0IGlzQW55Q2FySW5TcGFjZSBmcm9tICcuL2lzQW55Q2FySW5TcGFjZSc7XG5cbmZ1bmN0aW9uIGdldERyYWdCb3VuZGFyaWVzKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBnYW1lOiBHYW1lU3RhdGUpIHtcbiAgICBjb25zdCBoZWxkQ2FyID0gZ2FtZS5jYXJzW2dhbWUuaGVsZENhckluZGV4XVxuICAgIGNvbnN0IGNhcnMgPSBnYW1lLmNhcnM7XG4gICAgaWYgKGhlbGRDYXIub3JpZW50YXRpb24gPT09ICdoJykge1xuICAgICAgICBsZXQgbWluU3BhY2VYID0gaGVsZENhci54O1xuICAgICAgICB3aGlsZSAobWluU3BhY2VYID4gMCAmJiAhaXNBbnlDYXJJblNwYWNlKG1pblNwYWNlWCAtIDEsIGhlbGRDYXIueSwgY2FycykpIHtcbiAgICAgICAgICAgIG1pblNwYWNlWCAtPSAxOyAvLyBkb24ndCB1c2UgdW5hcnkgb3BlcmF0b3JzIGJlY2F1c2UgamF2YXNjcmlwdCB3YXMgZGVzaWduZWQgYnkgb3Jhbmd1dGFuc1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsZXQgbWF4U3BhY2VYID0gaGVsZENhci54O1xuICAgICAgICB3aGlsZSAobWF4U3BhY2VYICsgaGVsZENhci5zaXplIDwgNiAmJiAhaXNBbnlDYXJJblNwYWNlKG1heFNwYWNlWCArIGhlbGRDYXIuc2l6ZSwgaGVsZENhci55LCBjYXJzKSkge1xuICAgICAgICAgICAgbWF4U3BhY2VYICs9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVsZENhci55ID09PSAyICYmIG1heFNwYWNlWCA9PT0gNiAtIGhlbGRDYXIuc2l6ZSkge1xuICAgICAgICAgICAgLy8gZXhpdFxuICAgICAgICAgICAgbWF4U3BhY2VYID0gNjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1pbkNvb3JkcyA9IGdldE9yaWdpbkZvclNwYWNlKGN0eCwgbWluU3BhY2VYLCBoZWxkQ2FyLnkpO1xuICAgICAgICBjb25zdCBtYXhDb29yZHMgPSBnZXRPcmlnaW5Gb3JTcGFjZShjdHgsIG1heFNwYWNlWCwgaGVsZENhci55KTtcblxuICAgICAgICBjb25zdCBkcmFnQm91bmRhcmllcyA6IERyYWdCb3VuZGFyaWVzID0ge1xuICAgICAgICAgICAgbWF4WDogbWF4Q29vcmRzLngsXG4gICAgICAgICAgICBtYXhZOiBtYXhDb29yZHMueSxcbiAgICAgICAgICAgIG1pblg6IG1pbkNvb3Jkcy54LFxuICAgICAgICAgICAgbWluWTogbWluQ29vcmRzLnlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkcmFnQm91bmRhcmllcztcbiAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgbWluU3BhY2VZID0gaGVsZENhci55O1xuICAgICAgICB3aGlsZSAobWluU3BhY2VZID4gMCAmJiAhaXNBbnlDYXJJblNwYWNlKGhlbGRDYXIueCwgbWluU3BhY2VZIC0gMSwgY2FycykpIHtcbiAgICAgICAgICAgIG1pblNwYWNlWSAtPSAxOyBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IG1heFNwYWNlWSA9IGhlbGRDYXIueTtcbiAgICAgICAgd2hpbGUgKG1heFNwYWNlWSArIGhlbGRDYXIuc2l6ZSA8IDYgJiYgIWlzQW55Q2FySW5TcGFjZShoZWxkQ2FyLngsIG1heFNwYWNlWSArIGhlbGRDYXIuc2l6ZSwgY2FycykpIHtcbiAgICAgICAgICAgIG1heFNwYWNlWSArPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWluQ29vcmRzID0gZ2V0T3JpZ2luRm9yU3BhY2UoY3R4LCBoZWxkQ2FyLngsIG1pblNwYWNlWSk7XG4gICAgICAgIGNvbnN0IG1heENvb3JkcyA9IGdldE9yaWdpbkZvclNwYWNlKGN0eCwgaGVsZENhci54LCBtYXhTcGFjZVkpO1xuXG4gICAgICAgIGNvbnN0IGRyYWdCb3VuZGFyaWVzIDogRHJhZ0JvdW5kYXJpZXMgPSB7XG4gICAgICAgICAgICBtYXhYOiBtYXhDb29yZHMueCxcbiAgICAgICAgICAgIG1heFk6IG1heENvb3Jkcy55LFxuICAgICAgICAgICAgbWluWDogbWluQ29vcmRzLngsXG4gICAgICAgICAgICBtaW5ZOiBtaW5Db29yZHMueVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRyYWdCb3VuZGFyaWVzO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0RHJhZ0JvdW5kYXJpZXM7XG4iLCJpbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSAnQGludGVyZmFjZXMvY29vcmRpbmF0ZXMnO1xuXG5mdW5jdGlvbiBnZXROZWFyZXN0U3BhY2VGb3JDb29yZGluYXRlcyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29vcmRpbmF0ZXM6IENvb3JkaW5hdGVzKTogQ29vcmRpbmF0ZXMge1xuICAgIGNvbnN0IHdpZHRoID0gY3R4LmNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBjdHguY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCBwbGF5ZmllbGRXaWR0aCA9IDYgKiB3aWR0aCAvIDc7XG4gICAgY29uc3QgcGxheWZpZWxkSGVpZ2h0ID0gNiAqIGhlaWdodCAvIDc7XG4gICAgY29uc3QgcGxheWZpZWxkWCA9IHdpZHRoIC8gMTQ7XG4gICAgY29uc3QgcGxheWZpZWxkWSA9IGhlaWdodCAvIDE0O1xuXG4gICAgY29uc3Qgbm9ybWFsaXplZFggPSBjb29yZGluYXRlcy54IC0gcGxheWZpZWxkWDtcbiAgICBjb25zdCBub3JtYWxpemVkWSA9IGNvb3JkaW5hdGVzLnkgLSBwbGF5ZmllbGRZO1xuXG4gICAgY29uc3Qgc3BhY2VYID0gKG5vcm1hbGl6ZWRYIC8gcGxheWZpZWxkV2lkdGgpICogNjtcbiAgICBjb25zdCBzcGFjZVkgPSAobm9ybWFsaXplZFkgLyBwbGF5ZmllbGRIZWlnaHQpICogNjtcbiAgICBjb25zdCByb3VuZGVkU3BhY2VYID0gTWF0aC5yb3VuZChzcGFjZVgpO1xuICAgIGNvbnN0IHJvdW5kZWRTcGFjZVkgPSBNYXRoLnJvdW5kKHNwYWNlWSk7XG4gICAgY29uc29sZS5sb2coYCR7cm91bmRlZFNwYWNlWH0sJHtyb3VuZGVkU3BhY2VZfWApO1xuXG4gICAgcmV0dXJuIHsgeDogcm91bmRlZFNwYWNlWCwgeTogcm91bmRlZFNwYWNlWSB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXROZWFyZXN0U3BhY2VGb3JDb29yZGluYXRlczsiLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2dhbWVTdGF0ZSc7XG5cbmZ1bmN0aW9uIGFuaW1hdGVDYXJzKGdhbWU6IEdhbWVTdGF0ZSkge1xuICAgIGdhbWUuY2Fycy5mb3JFYWNoKGNhciA9PiB7XG4gICAgICAgICsrY2FyLmFuaW1hdGlvbkZyYW1lXG4gICAgICAgIGlmIChjYXIuYW5pbWF0aW9uID09PSAnaW5jb21pbmcnICYmIGNhci5hbmltYXRpb25GcmFtZSA9PT0gMzApIHtcbiAgICAgICAgICAgIGdhbWUucGxheURyb3BTb3VuZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FyLmFuaW1hdGlvbiA9PT0gJ2ZhbGxpbmcnICYmIGNhci5hbmltYXRpb25GcmFtZSA9PT0gMSkge1xuICAgICAgICAgICAgZ2FtZS5wbGF5UGlja3VwU291bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFuaW1hdGVDYXJzOyIsImltcG9ydCBHYW1lU3RhdGUgZnJvbSAnQGludGVyZmFjZXMvZ2FtZVN0YXRlJztcbmltcG9ydCBJbnB1dFN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2lucHV0U3RhdGUnO1xuXG5pbXBvcnQgYXJlQWxsQW5pbWF0aW9uc0ZpbmlzaGVkIGZyb20gJ0B1dGlsL2FyZUFsbEFuaW1hdGlvbnNGaW5pc2hlZCc7XG5cbmltcG9ydCB1cGRhdGVHcmFiU3RhdGUgZnJvbSAnLi91cGRhdGVHcmFiU3RhdGUnO1xuaW1wb3J0IHVwZGF0ZUhlbGRDYXJQb3NpdGlvbiBmcm9tICcuL3VwZGF0ZUhlbGRDYXJQb3NpdGlvbic7XG5pbXBvcnQgdXBkYXRlVG9UZWFyRG93blBoYXNlSWZMZXZlbFdvbiBmcm9tICcuL3VwZGF0ZVRvVGVhckRvd25QaGFzZUlmTGV2ZWxXb24nO1xuaW1wb3J0IHVwZGF0ZVRvUGxheVBoYXNlIGZyb20gJy4vdXBkYXRlVG9QbGF5UGhhc2UnO1xuaW1wb3J0IGFuaW1hdGVDYXJzIGZyb20gJy4vYW5pbWF0ZUNhcnMnO1xuXG5mdW5jdGlvbiB1cGRhdGUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGdhbWU6IEdhbWVTdGF0ZSwgaW5wdXQ6IElucHV0U3RhdGUpIHtcbiAgICBpZiAoZ2FtZS5nYW1lUGhhc2UgPT09ICdzZXR0aW5nVXBMZXZlbCcpIHtcbiAgICAgICAgYW5pbWF0ZUNhcnMoZ2FtZSk7XG4gICAgICAgIGlmIChhcmVBbGxBbmltYXRpb25zRmluaXNoZWQoZ2FtZSkpIHtcbiAgICAgICAgICAgIHVwZGF0ZVRvUGxheVBoYXNlKGdhbWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChnYW1lLmdhbWVQaGFzZSA9PT0gJ3BsYXknKSB7XG4gICAgICAgIHVwZGF0ZUdyYWJTdGF0ZShjdHgsIGdhbWUsIGlucHV0KTtcbiAgICAgICAgdXBkYXRlSGVsZENhclBvc2l0aW9uKGN0eCwgZ2FtZSwgaW5wdXQpO1xuICAgICAgICB1cGRhdGVUb1RlYXJEb3duUGhhc2VJZkxldmVsV29uKGN0eCwgZ2FtZSk7XG4gICAgfSBlbHNlIGlmIChnYW1lLmdhbWVQaGFzZSA9PT0gJ3RlYXJpbmdEb3duTGV2ZWwnKSB7XG4gICAgICAgIGFuaW1hdGVDYXJzKGdhbWUpO1xuICAgICAgICBpZiAoYXJlQWxsQW5pbWF0aW9uc0ZpbmlzaGVkKGdhbWUpKSB7XG4gICAgICAgICAgICBnYW1lLmxldmVsQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgZ2FtZS5jdXJyZW50TGV2ZWwgPSBnYW1lLmN1cnJlbnRMZXZlbCArIDEgJSAzO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB1cGRhdGU7XG4iLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2dhbWVTdGF0ZSc7XG5cbmZ1bmN0aW9uIHVwZGF0ZVRvUGxheVBoYXNlKGdhbWU6IEdhbWVTdGF0ZSkge1xuICAgIGdhbWUuZ2FtZVBoYXNlID0gJ3BsYXknO1xuICAgIGdhbWUuY2Fycy5mb3JFYWNoKGNhciA9PiB7XG4gICAgICAgIGNhci5hbmltYXRpb24gPSAnbm9uZSc7XG4gICAgICAgIGNhci5hbmltYXRpb25GcmFtZSA9IDA7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVwZGF0ZVRvUGxheVBoYXNlOyIsImltcG9ydCBHYW1lU3RhdGUgZnJvbSAnQGludGVyZmFjZXMvZ2FtZVN0YXRlJztcbmltcG9ydCBJbnB1dFN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2lucHV0U3RhdGUnO1xuXG5pbXBvcnQgZ2V0SGVsZENhclBvc2l0aW9uIGZyb20gJ0B1dGlsL2dldEhlbGRDYXJQb3NpdGlvbic7XG5cbmZ1bmN0aW9uIHVwZGF0ZUhlbGRDYXJQb3NpdGlvbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZ2FtZTogR2FtZVN0YXRlLCBpbnB1dDogSW5wdXRTdGF0ZSkge1xuICAgIGlmIChnYW1lLmhvbGRpbmdDYXIgJiYgZ2FtZS5oZWxkQ2FySW5kZXggPj0gMCkge1xuICAgICAgICBnYW1lLmhlbGRDYXJQb3NpdGlvbiA9IGdldEhlbGRDYXJQb3NpdGlvbihjdHgsIGdhbWUsIGlucHV0KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdXBkYXRlSGVsZENhclBvc2l0aW9uO1xuIiwiaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICdAaW50ZXJmYWNlcy9nYW1lU3RhdGUnO1xuXG5pbXBvcnQgaXNMZXZlbENvbXBsZXRlZCBmcm9tICdAdXRpbC9pc0xldmVsQ29tcGxldGVkJztcblxuZnVuY3Rpb24gdXBkYXRlVG9UZWFyRG93blBoYXNlSWZMZXZlbFdvbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZ2FtZTogR2FtZVN0YXRlKSB7XG4gICAgaWYgKGdhbWUuaGVsZENhckluZGV4ID09PSAwICYmIGlzTGV2ZWxDb21wbGV0ZWQoY3R4LCBnYW1lLmNhcnNbZ2FtZS5oZWxkQ2FySW5kZXhdLCBnYW1lLmhlbGRDYXJQb3NpdGlvbikpIHtcbiAgICAgICAgaWYgKGdhbWUuY3VycmVudExldmVsID09PSAzKSB7XG4gICAgICAgICAgICBhbGVydCgnWW91XFwncmUgcHVyZHkgc21hcnQgdGhlcmUgZWluc3RlaW4nKTtcbiAgICAgICAgfVxuICAgICAgICBnYW1lLmdhbWVQaGFzZSA9ICd0ZWFyaW5nRG93bkxldmVsJztcbiAgICAgICAgZ2FtZS5jYXJzLmZvckVhY2goKGNhciwgaSkgPT4ge1xuICAgICAgICAgICAgY2FyLmFuaW1hdGlvbiA9ICdmYWxsaW5nJztcbiAgICAgICAgICAgIGNhci5hbmltYXRpb25GcmFtZSA9IGkgKiAtMTA7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVwZGF0ZVRvVGVhckRvd25QaGFzZUlmTGV2ZWxXb247XG4iLCJpbXBvcnQgQ2FyIGZyb20gJ0BpbnRlcmZhY2VzL2Nhcic7XG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSAnQGludGVyZmFjZXMvY29vcmRpbmF0ZXMnO1xuXG5mdW5jdGlvbiBpc0xldmVsQ29tcGxldGVkKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBoZWxkQ2FyOiBDYXIsIGhlbGRDYXJQb3NpdGlvbjogQ29vcmRpbmF0ZXMpIHtcbiAgICBjb25zdCB3aWR0aCA9IGN0eC5jYW52YXMud2lkdGg7XG4gICAgY29uc3Qgc3BhY2VXaWR0aCA9ICh3aWR0aCAvIDcpO1xuICAgIGNvbnN0IGNhclJpZ2h0WCA9IGhlbGRDYXJQb3NpdGlvbi54ICsgKHNwYWNlV2lkdGggKiBoZWxkQ2FyLnNpemUpO1xuXG4gICAgY29uc3QgbGV2ZWxDb21wbGV0ZWQgPSBjYXJSaWdodFggPiB3aWR0aDtcbiAgICByZXR1cm4gbGV2ZWxDb21wbGV0ZWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGlzTGV2ZWxDb21wbGV0ZWQ7IiwiZnVuY3Rpb24gcGxheVNvdW5kKGF1ZGlvQ29udGV4dDogQXVkaW9Db250ZXh0LCBhdWRpb0J1ZmZlcjogQXVkaW9CdWZmZXIpIHtcbiAgICBjb25zdCBzb3VyY2UgPSBhdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgc291cmNlLmJ1ZmZlciA9IGF1ZGlvQnVmZmVyO1xuICAgIHNvdXJjZS5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgc291cmNlLnN0YXJ0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXlTb3VuZDtcbiIsImltcG9ydCBsb2FkQXVkaW8gZnJvbSAnQGF1ZGlvL2xvYWRBdWRpbyc7XG5cbmltcG9ydCBkcmF3IGZyb20gJ0BkcmF3L2RyYXcnO1xuXG5pbXBvcnQgQ29vcmRpbmF0ZXMgZnJvbSAnQGludGVyZmFjZXMvY29vcmRpbmF0ZXMnO1xuaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICdAaW50ZXJmYWNlcy9nYW1lU3RhdGUnO1xuaW1wb3J0IElucHV0U3RhdGUgZnJvbSAnQGludGVyZmFjZXMvaW5wdXRTdGF0ZSc7XG5pbXBvcnQgQXVkaW9CdWZmZXJzIGZyb20gJ0BpbnRlcmZhY2VzL2F1ZGlvQnVmZmVycyc7XG5cbmltcG9ydCByZXNldEdhbWUgZnJvbSAnQHVwZGF0ZS9yZXNldEdhbWUnO1xuaW1wb3J0IHVwZGF0ZSBmcm9tICdAdXBkYXRlL3VwZGF0ZSc7XG5cbmltcG9ydCBnZXRFbXB0eUlucHV0U3RhdGUgZnJvbSAnQHV0aWwvZ2V0RW1wdHlJbnB1dFN0YXRlJztcbmltcG9ydCBnZXRFbXB0eUdhbWVTdGF0ZSBmcm9tICdAdXRpbC9nZXRFbXB0eUdhbWVTdGF0ZSc7XG5pbXBvcnQgcGxheVNvdW5kcyBmcm9tICdAYXVkaW8vcGxheVNvdW5kcyc7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkbG9ja0NhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG5jb25zdCBhdWRpb0NvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7XG5jb25zdCBhdWRpb0J1ZmZlcnM6IEF1ZGlvQnVmZmVycyA9IHtcbiAgICBkcm9wOiB1bmRlZmluZWQsXG4gICAgcGlja3VwOiB1bmRlZmluZWRcbn07XG5cblxubGV0IGNsaWVudE1vdXNlWCA9IDA7XG5sZXQgY2xpZW50TW91c2VZID0gMDtcblxuY29uc3QgZ2FtZTogR2FtZVN0YXRlID0gZ2V0RW1wdHlHYW1lU3RhdGUoKTtcbmNvbnN0IGlucHV0OiBJbnB1dFN0YXRlID0gZ2V0RW1wdHlJbnB1dFN0YXRlKCk7XG5cblxuXG5cbmFzeW5jIGZ1bmN0aW9uIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgbG9hZEF1ZGlvKGF1ZGlvQ29udGV4dCwgYXVkaW9CdWZmZXJzKTtcbiAgICBhd2FpdCByZXNldEdhbWUoZ2FtZSk7XG59XG5cbmZ1bmN0aW9uIGdldENhbnZhc01vdXNlUG9zaXRpb24oKTogQ29vcmRpbmF0ZXMge1xuICAgIGNvbnN0IGJvdW5kaW5nID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKGNsaWVudE1vdXNlWCAtIGJvdW5kaW5nLngpO1xuICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGNsaWVudE1vdXNlWSAtIGJvdW5kaW5nLnkpO1xuXG4gICAgcmV0dXJuIHsgeCwgeSB9O1xufVxuXG5mdW5jdGlvbiBzdGVwKCk6IHZvaWQge1xuICAgIGlucHV0LmNhbnZhc01vdXNlID0gZ2V0Q2FudmFzTW91c2VQb3NpdGlvbigpO1xuXG4gICAgdXBkYXRlKGN0eCwgZ2FtZSwgaW5wdXQpO1xuXG4gICAgaWYgKGdhbWUubGV2ZWxDb21wbGV0ZSkge1xuICAgICAgICByZXNldEdhbWUoZ2FtZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRyYXcoY3R4LCBnYW1lKTtcbiAgICBwbGF5U291bmRzKGF1ZGlvQ29udGV4dCwgZ2FtZSwgYXVkaW9CdWZmZXJzKTtcblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU1vdXNlKGU6IE1vdXNlRXZlbnQpIHtcbiAgICBpbnB1dC5tb3VzZUJ1dHRvblByZXNzZWQgPSAoZS5idXR0b25zICYgMSkgPT09IDE7XG4gICAgY2xpZW50TW91c2VYID0gZS5jbGllbnRYO1xuICAgIGNsaWVudE1vdXNlWSA9IGUuY2xpZW50WTtcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB1cGRhdGVNb3VzZSk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHVwZGF0ZU1vdXNlKTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHVwZGF0ZU1vdXNlKTtcblxuZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydChlOiBUb3VjaEV2ZW50KSB7XG4gICAgaW5wdXQubW91c2VCdXR0b25QcmVzc2VkID0gdHJ1ZTtcbiAgICBjbGllbnRNb3VzZVggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XG4gICAgY2xpZW50TW91c2VZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmUoZTogVG91Y2hFdmVudCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjbGllbnRNb3VzZVggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XG4gICAgY2xpZW50TW91c2VZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVUb3VjaFN0b3AoZTogVG91Y2hFdmVudCkge1xuICAgIGlucHV0Lm1vdXNlQnV0dG9uUHJlc3NlZCA9IGZhbHNlO1xufVxuXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGhhbmRsZVRvdWNoU3RhcnQpO1xuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGhhbmRsZVRvdWNoTW92ZSk7XG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBoYW5kbGVUb3VjaFN0b3ApO1xuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgaGFuZGxlVG91Y2hTdG9wKTtcblxuZnVuY3Rpb24gaGFuZGxlQ2FudmFzQ2xpY2soZTogTW91c2VFdmVudCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZ2FtZS5nYW1lUGhhc2UgPT09ICd0aXRsZScpIHtcbiAgICAgICAgZ2FtZS5nYW1lUGhhc2UgPSAnc2V0dGluZ1VwTGV2ZWwnO1xuICAgIH1cbn1cblxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2FudmFzQ2xpY2spO1xuXG5pbml0KCkudGhlbigoKSA9PiB7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbn0pLmNhdGNoKChlKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcignaW5pdGlhbGl6YXRpb24gZXJyb3InKTtcbiAgICBjb25zb2xlLmVycm9yKGUpO1xufSk7IiwiaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICdAaW50ZXJmYWNlcy9nYW1lU3RhdGUnO1xuXG5mdW5jdGlvbiBnZXRFbXB0eUdhbWVTdGF0ZSgpIHtcbiAgICBjb25zdCBlbXB0eVN0YXRlOiBHYW1lU3RhdGUgPSB7XG4gICAgICAgIGNhcnM6IFtdLFxuICAgICAgICBjdXJyZW50TGV2ZWw6IDAsXG4gICAgICAgIGRyYWdCb3VuZGFyaWVzOiB7XG4gICAgICAgICAgICBtYXhYOiAwLFxuICAgICAgICAgICAgbWF4WTogMCxcbiAgICAgICAgICAgIG1pblg6IDAsXG4gICAgICAgICAgICBtaW5ZOiAwLFxuICAgICAgICB9LFxuICAgICAgICBnYW1lUGhhc2U6ICd0aXRsZScsXG4gICAgICAgIGhlbGRDYXJJbmRleDogLTEsXG4gICAgICAgIGhlbGRDYXJQb3NpdGlvbjoge1xuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDBcbiAgICAgICAgfSxcbiAgICAgICAgaG9sZGluZ0NhcjogZmFsc2UsXG4gICAgICAgIGhvbGRPcmlnaW5hbENhbnZhc01vdXNlOiB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMFxuICAgICAgICB9LFxuICAgICAgICBsZXZlbENvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgcGxheURyb3BTb3VuZDogZmFsc2UsXG4gICAgICAgIHBsYXlQaWNrdXBTb3VuZDogZmFsc2VcbiAgICB9O1xuXG4gICAgcmV0dXJuIGVtcHR5U3RhdGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldEVtcHR5R2FtZVN0YXRlOyIsImltcG9ydCBJbnB1dFN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2lucHV0U3RhdGUnO1xuXG5mdW5jdGlvbiBnZXRFbXB0eUlucHV0U3RhdGUgKCkge1xuICAgIGNvbnN0IGVtcHR5U3RhdGU6IElucHV0U3RhdGUgPSB7XG4gICAgICAgIGNhbnZhc01vdXNlOiB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMFxuICAgICAgICB9LFxuICAgICAgICBtb3VzZUJ1dHRvblByZXNzZWQ6IGZhbHNlXG4gICAgfTtcblxuICAgIHJldHVybiBlbXB0eVN0YXRlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRFbXB0eUlucHV0U3RhdGU7XG4iLCJpbXBvcnQgQXVkaW9CdWZmZXJzIGZyb20gJ0BpbnRlcmZhY2VzL2F1ZGlvQnVmZmVycyc7XG5pbXBvcnQgR2FtZVN0YXRlIGZyb20gJ0BpbnRlcmZhY2VzL2dhbWVTdGF0ZSc7XG5cbmltcG9ydCBwbGF5U291bmQgZnJvbSAnLi9wbGF5U291bmQnO1xuXG5mdW5jdGlvbiBwbGF5U291bmRzKGF1ZGlvQ29udGV4dDogQXVkaW9Db250ZXh0LCBnYW1lOiBHYW1lU3RhdGUsIGF1ZGlvQnVmZmVyczogQXVkaW9CdWZmZXJzKSB7XG4gICAgaWYgKGdhbWUucGxheURyb3BTb3VuZCAmJiBhdWRpb0J1ZmZlcnMuZHJvcCkge1xuICAgICAgICBwbGF5U291bmQoYXVkaW9Db250ZXh0LCBhdWRpb0J1ZmZlcnMuZHJvcCk7XG4gICAgfVxuICAgIGlmIChnYW1lLnBsYXlQaWNrdXBTb3VuZCAmJiBhdWRpb0J1ZmZlcnMucGlja3VwKSB7XG4gICAgICAgIHBsYXlTb3VuZChhdWRpb0NvbnRleHQsIGF1ZGlvQnVmZmVycy5waWNrdXApO1xuICAgIH1cbiAgICBnYW1lLnBsYXlEcm9wU291bmQgPSBmYWxzZTtcbiAgICBnYW1lLnBsYXlQaWNrdXBTb3VuZCA9IGZhbHNlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwbGF5U291bmRzO1xuIl0sIm5hbWVzIjpbImF1ZGlvQ29udGV4dCIsInBhdGgiLCJyZXNwIiwiZmV0Y2giLCJhcnJheUJ1ZmZlciIsImRlY29kZUF1ZGlvRGF0YSIsImF1ZGlvQnVmZmVycyIsImRyb3BTb3VuZEJ1ZmZlciIsInBpY2t1cFNvdW5kQnVmZmVyIiwiZHJvcCIsInBpY2t1cCIsImN0eCIsInNwYWNlWCIsInNwYWNlWSIsIndpZHRoIiwiY2FudmFzIiwiaGVpZ2h0IiwieCIsInkiLCJjYXIiLCJjb2xvciIsInBvc2l0aW9uIiwiaGlnaGxpZ2h0Iiwic3BhY2VXaWR0aCIsInNwYWNlSGVpZ2h0IiwiY2FyV2lkdGgiLCJjYXJIZWlnaHQiLCJvcmllbnRhdGlvbiIsInNpemUiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImdhbWUiLCJpIiwiaiIsImV4aXRYIiwiZXhpdFkiLCJnYW1lUGhhc2UiLCJjYXJzIiwiZm9yRWFjaCIsImhlbGRDYXJJbmRleCIsImNhclBvc2l0aW9uIiwiYW5pbWF0aW9uIiwiYW5pbWF0aW9uRnJhbWUiLCJyYXRpbyIsIk1hdGgiLCJtYXgiLCJwb3ciLCJtaW4iLCJoZWxkQ2FyIiwiaGVsZENhclBvc2l0aW9uIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJIZWlnaHQiLCJ0b3BFeGl0Qm9yZGVyVG90YWxIZWlnaHQiLCJib3R0b21FeGl0Qm9yZGVyVG90YWxoZWlnaHQiLCJ0ZXh0QWxpZ24iLCJ0ZXh0QmFzZWxpbmUiLCJmb250IiwiZmlsbFRleHQiLCJsZXZlbFJlc3BvbnNlIiwianNvbiIsImdhbWVTdGF0ZSIsImxldmVsRmlsZSIsImN1cnJlbnRMZXZlbCIsImhvbGRpbmdDYXIiLCJsZXZlbENvbXBsZXRlIiwic29tZSIsImNhbnZhc01vdXNlQ29vcmRzIiwiY2FudmFzTW91c2VYIiwiY2FudmFzTW91c2VZIiwiY2FyWCIsImNhclkiLCJpbnB1dCIsInRhcmdldEhlbGRDYXJQb3NpdGlvbiIsImhlbGRDYXJPcmlnaW4iLCJkcmFnWCIsImNhbnZhc01vdXNlIiwiaG9sZE9yaWdpbmFsQ2FudmFzTW91c2UiLCJkcmFnWSIsImRyYWdCb3VuZGFyaWVzIiwibWluWCIsIm1heFgiLCJtaW5ZIiwibWF4WSIsIm1vdXNlQnV0dG9uUHJlc3NlZCIsImxlbmd0aCIsIm1pblNwYWNlWCIsIm1heFNwYWNlWCIsIm1pbkNvb3JkcyIsIm1heENvb3JkcyIsIm1pblNwYWNlWSIsIm1heFNwYWNlWSIsInBsYXlQaWNrdXBTb3VuZCIsIm5ld1NwYWNlQ29vcmRzIiwiY29vcmRpbmF0ZXMiLCJwbGF5ZmllbGRXaWR0aCIsInBsYXlmaWVsZEhlaWdodCIsInBsYXlmaWVsZFgiLCJwbGF5ZmllbGRZIiwicm91bmRlZFNwYWNlWCIsInJvdW5kIiwicm91bmRlZFNwYWNlWSIsImNvbnNvbGUiLCJsb2ciLCJwbGF5RHJvcFNvdW5kIiwiYWxlcnQiLCJhdWRpb0J1ZmZlciIsInNvdXJjZSIsImNyZWF0ZUJ1ZmZlclNvdXJjZSIsImJ1ZmZlciIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsInN0YXJ0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJBdWRpb0NvbnRleHQiLCJ1bmRlZmluZWQiLCJjbGllbnRNb3VzZVgiLCJjbGllbnRNb3VzZVkiLCJzdGVwIiwiYm91bmRpbmciLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJmbG9vciIsImdldENhbnZhc01vdXNlUG9zaXRpb24iLCJ0aGVuIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidXBkYXRlTW91c2UiLCJlIiwiYnV0dG9ucyIsImNsaWVudFgiLCJjbGllbnRZIiwiaGFuZGxlVG91Y2hTdG9wIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNoYW5nZWRUb3VjaGVzIiwicHJldmVudERlZmF1bHQiLCJpbml0IiwiY2F0Y2giLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=